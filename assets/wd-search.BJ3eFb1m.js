import{d as a,r as e,w as l,o as s,c,a as u,b as t,e as o,f as r,h as d,D as n,i,l as h,j as v,n as f,k as p,t as m,u as _,aq as w}from"./index-BZ1W9cPT.js";import{b as y,a as C,m as g,c as x,o as b,p as k,w as S,_ as V}from"./wd-icon.Qm1QYAwI.js";import{a as $}from"./useTranslate.BsljvOrG.js";const I=V(a({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...x,customInputClass:y(""),modelValue:y(""),useSuffixSlot:C(!1),placeholder:String,cancelTxt:String,light:C(!1),hideCancel:C(!1),disabled:C(!1),maxlength:g(-1),placeholderLeft:C(!1),focus:C(!1),focusWhenClear:C(!1),placeholderStyle:String,placeholderClass:y("")},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(a,{emit:y}){const C=a,g=y,{translate:x}=$("search"),V=e(!1),I=e(!1),j=e(""),L=e(!0),T=e(!1);l(()=>C.modelValue,a=>{j.value=a,a&&(I.value=!0)},{immediate:!0}),l(()=>C.focus,a=>{if(a){if(C.disabled)return;D()}}),s(()=>{C.focus&&D()});const W=c(()=>`wd-search  ${C.light?"is-light":""}  ${C.hideCancel?"is-without-cancel":""} ${C.customClass}`),q=c(()=>{const a={display:""===j.value&&L.value?"flex":"none"};return b(a)});async function B(a){I.value=a,await k(),V.value=a}async function D(){C.disabled||(await k(100),L.value=!1,B(!0))}function F(a){j.value=a.detail.value,g("update:modelValue",a.detail.value),g("change",{value:a.detail.value})}async function G(){j.value="",C.focusWhenClear&&(T.value=!0,V.value=!1),await k(),C.focusWhenClear?(L.value=!1,B(!0)):(L.value=!0,B(!1)),g("change",{value:""}),g("update:modelValue",""),g("clear")}function H({detail:{value:a}}){g("search",{value:a})}function U(){L.value=!1,g("focus",{value:j.value})}async function z(){await k(150),T.value?T.value=!1:(L.value=!j.value,I.value=!L.value,V.value=!1,g("blur",{value:j.value}))}function A(){g("cancel",{value:j.value})}return(a,e)=>{const l=v,s=i,c=w;return t(),u(s,{class:f(W.value),style:h(a.customStyle)},{default:o(()=>[r(s,{class:"wd-search__block"},{default:o(()=>[d(a.$slots,"prefix",{},void 0,!0),r(s,{class:"wd-search__field"},{default:o(()=>[a.placeholderLeft?n("",!0):(t(),u(s,{key:0,style:h(q.value),class:"wd-search__cover",onClick:D},{default:o(()=>[r(S,{name:"search","custom-class":"wd-search__search-icon"}),r(l,{class:f(`wd-search__placeholder-txt ${a.placeholderClass}`)},{default:o(()=>[p(m(a.placeholder||_(x)("search")),1)]),_:1},8,["class"])]),_:1},8,["style"])),I.value||j.value||a.placeholderLeft?(t(),u(S,{key:1,name:"search","custom-class":"wd-search__search-left-icon"})):n("",!0),I.value||j.value||a.placeholderLeft?(t(),u(c,{key:2,placeholder:a.placeholder||_(x)("search"),"placeholder-class":`wd-search__placeholder-txt ${a.placeholderClass}`,"placeholder-style":a.placeholderStyle,"confirm-type":"search",modelValue:j.value,"onUpdate:modelValue":e[0]||(e[0]=a=>j.value=a),class:f(["wd-search__input",a.customInputClass]),onFocus:U,onInput:F,onBlur:z,onConfirm:H,disabled:a.disabled,maxlength:a.maxlength,focus:V.value},null,8,["placeholder","placeholder-class","placeholder-style","modelValue","class","disabled","maxlength","focus"])):n("",!0),j.value?(t(),u(S,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",onClick:G})):n("",!0)]),_:1})]),_:3}),a.hideCancel?n("",!0):d(a.$slots,"suffix",{key:0},()=>[r(s,{class:"wd-search__cancel",onClick:A},{default:o(()=>[p(m(a.cancelTxt||_(x)("cancel")),1)]),_:1})],!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-7650d631"]]);export{I as _};
