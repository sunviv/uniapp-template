import{d as e,r as a,c as l,m as t,w as s,a as o,D as n,b as r,i as u,l as i,n as c,e as d,h as v,aF as p,C as f,G as m,X as y,f as w,p as h,F as b,k as g,t as $,aq as _,j as k}from"./index-E6UHNmn_.js";import{b as x,a as C,c as S,O as I,l as T,p as j,j as A,m as V,v as E,q as W,h as z,o as B,C as q,w as P}from"./wd-icon.BxojWwtz.js";import{_ as H}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{u as N,F as O}from"./types.l_ZeAjVs.js";import{a as F,u as G}from"./useTranslate.DWSEzQzj.js";const L=H(e({name:"wd-transition",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...S,show:C(!1),duration:{type:[Object,Number,Boolean],default:300},lazyRender:C(!1),name:[String,Array],destroy:C(!0),enterClass:x(""),enterActiveClass:x(""),enterToClass:x(""),leaveClass:x(""),leaveActiveClass:x(""),leaveToClass:x("")},emits:["click","before-enter","enter","before-leave","leave","after-leave","after-enter"],setup(e,{emit:p}){const f=e=>{let a=`${m.enterClass} ${m.enterActiveClass}`,l=`${m.enterToClass} ${m.enterActiveClass}`,t=`${m.leaveClass} ${m.leaveActiveClass}`,s=`${m.leaveToClass} ${m.leaveActiveClass}`;if(Array.isArray(e))for(let o=0;o<e.length;o++)a=`wd-${e[o]}-enter wd-${e[o]}-enter-active ${a}`,l=`wd-${e[o]}-enter-to wd-${e[o]}-enter-active ${l}`,t=`wd-${e[o]}-leave wd-${e[o]}-leave-active ${t}`,s=`wd-${e[o]}-leave-to wd-${e[o]}-leave-active ${s}`;else e&&(a=`wd-${e}-enter wd-${e}-enter-active ${a}`,l=`wd-${e}-enter-to wd-${e}-enter-active ${l}`,t=`wd-${e}-leave wd-${e}-leave-active ${t}`,s=`wd-${e}-leave-to wd-${e}-leave-active ${s}`);return{enter:a,"enter-to":l,leave:t,"leave-to":s}},m=e,y=p,w=a(!1),h=a(!1),b=a(""),g=a(!1),$=a(300),_=a(""),k=a(null),x=a(null),C=a(null),S=l(()=>`-webkit-transition-duration:${$.value}ms;transition-duration:${$.value}ms;${h.value||!m.destroy?"":"display: none;"}${m.customStyle}`),V=l(()=>`wd-transition ${m.customClass}  ${_.value}`);function E(){y("click")}function W(){k.value=new I(async e=>{try{const a=f(m.name),l=T(m.duration)?m.duration.enter:m.duration;b.value="enter",y("before-enter"),x.value=j(),await x.value,y("enter"),_.value=a.enter,$.value=l,x.value=j(),await x.value,w.value=!0,h.value=!0,x.value=j(),await x.value,x.value=null,g.value=!1,_.value=a["enter-to"],e()}catch(a){}})}function z(){g.value||(g.value=!0,"leave"===b.value?y("after-leave"):"enter"===b.value&&y("after-enter"),!m.show&&h.value&&(h.value=!1))}return t(()=>{m.show&&W()}),s(()=>m.show,e=>{e?(A(k.value)&&k.value.abort(),A(x.value)&&x.value.abort(),A(C.value)&&C.value.abort(),k.value=null,x.value=null,C.value=null,W()):async function(){if(!k.value)return g.value=!1,z();try{if(await k.value,!h.value)return;const e=f(m.name),a=T(m.duration)?m.duration.leave:m.duration;b.value="leave",y("before-leave"),$.value=a,C.value=j(),await C.value,y("leave"),_.value=e.leave,C.value=j(),await C.value,g.value=!1,_.value=e["leave-to"],C.value=function(e){return new I(a=>{const l=setTimeout(()=>{clearTimeout(l),a()},e)})}($.value),await C.value,C.value=null,z(),k.value=null}catch(e){}}()},{deep:!0}),(e,a)=>{const l=u;return!e.lazyRender||w.value?(r(),o(l,{key:0,class:c(V.value),style:i(S.value),onTransitionend:z,onClick:E},{default:d(()=>[v(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])):n("",!0)}}}),[["__scopeId","data-v-1fc69211"]]);function R(e){const l=a(0),t=()=>{0===l.value&&(document.getElementsByTagName("body")[0].style.overflow="hidden"),l.value++},o=()=>{l.value>0&&(l.value--,0===l.value&&(document.getElementsByTagName("body")[0].style.overflow=""))},n=()=>{e()&&o()};return s(e,e=>{e?t():o()}),p(n),f(n),{lock:t,unlock:o}}const K=H(e({name:"wd-overlay",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...S,show:C(!1),duration:{type:[Object,Number,Boolean],default:300},lockScroll:C(!0),zIndex:V(10)},emits:["click"],setup(e,{emit:a}){const l=e,t=a;function s(){t("click")}function n(){}return R(()=>l.show&&l.lockScroll),(e,a)=>(r(),o(L,{show:e.show,name:"fade","custom-class":"wd-overlay",duration:e.duration,"custom-style":`z-index: ${e.zIndex}; ${e.customStyle}`,onClick:s,onTouchmove:a[0]||(a[0]=m(a=>e.lockScroll?n:"",["stop","prevent"]))},{default:d(()=>[v(e.$slots,"default",{},void 0,!0)]),_:3},8,["show","duration","custom-style"]))}}),[["__scopeId","data-v-ec0037f9"]]),M=H(e({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...S,customInputClass:x(""),customLabelClass:x(""),placeholder:String,placeholderStyle:String,placeholderClass:x(""),cursorSpacing:V(0),cursor:V(-1),selectionStart:V(-1),selectionEnd:V(-1),adjustPosition:C(!0),holdKeyboard:C(!1),confirmType:x("done"),confirmHold:C(!1),focus:C(!1),type:x("text"),maxlength:{type:Number,default:-1},disabled:C(!1),alwaysEmbed:C(!1),alignRight:C(!1),modelValue:W(""),showPassword:C(!1),clearable:C(!1),readonly:C(!1),prefixIcon:String,suffixIcon:String,showWordLimit:C(!1),label:String,labelWidth:x(""),size:String,error:C(!1),center:C(!1),noBorder:C(!1),required:C(!1),prop:String,rules:E(),clearTrigger:x("always"),focusWhenClear:C(!0),ignoreCompositionEvent:C(!0),inputmode:x("text")},emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(e,{emit:t}){const p=e,f=t,m=y(),{translate:x}=F("input"),C=a(!1),S=a(!1),I=a(!1),T=a(!1),A=a(function(){const e=function(e){const{maxlength:a}=p;if(z(a)&&-1!==a&&String(e).length>a)return e.toString().slice(0,a);return e}(p.modelValue);a=e,l=p.modelValue,q(String(a),String(l))||f("update:modelValue",e);var a,l;return e}()),V=N();s(()=>p.focus,e=>{I.value=e},{immediate:!0,deep:!0}),s(()=>p.modelValue,e=>{A.value=z(e)?String(e):""});const{parent:E}=G(O),W=l(()=>z(p.placeholder)?p.placeholder:x("placeholder")),H=l(()=>{const{disabled:e,readonly:a,clearable:l,clearTrigger:t}=p;return!(!l||a||e||!A.value||!("always"===t||"focus"===p.clearTrigger&&T.value))}),L=l(()=>{const{disabled:e,readonly:a,maxlength:l,showWordLimit:t}=p;return Boolean(!e&&!a&&z(l)&&l>-1&&t)}),R=l(()=>E&&p.prop&&E.errorMessages&&E.errorMessages[p.prop]?E.errorMessages[p.prop]:""),K=l(()=>{let e=!1;if(E&&E.props.rules){const a=E.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===p.prop&&Array.isArray(a[l])&&(e=a[l].some(e=>e.required))}return p.required||p.rules.some(e=>e.required)||e}),M=l(()=>`wd-input  ${p.label||m.label?"is-cell":""} ${p.center?"is-center":""} ${V.border.value?"is-border":""} ${p.size?"is-"+p.size:""} ${p.error?"is-error":""} ${p.disabled?"is-disabled":""}  ${A.value&&String(A.value).length>0?"is-not-empty":""}  ${p.noBorder?"is-no-border":""} ${p.customClass}`),D=l(()=>`wd-input__label ${p.customLabelClass} ${K.value?"is-required":""}`),U=l(()=>`wd-input__placeholder  ${p.placeholderClass}`),X=l(()=>p.labelWidth?B({"min-width":p.labelWidth,"max-width":p.labelWidth}):"");function J(){C.value=!C.value}async function Q(){T.value=!1,A.value="",p.focusWhenClear&&(S.value=!0,I.value=!1),await j(),p.focusWhenClear&&(I.value=!0,T.value=!0),f("update:modelValue",A.value),f("clear")}async function Y(){await j(150),S.value?S.value=!1:(T.value=!1,f("blur",{value:A.value}))}function Z({detail:e}){T.value=!0,f("focus",e)}function ee({detail:e}){f("update:modelValue",A.value),f("input",e)}function ae({detail:e}){f("keyboardheightchange",e)}function le({detail:e}){f("confirm",e)}function te(){f("clicksuffixicon")}function se(){f("clickprefixicon")}function oe(e){f("click",e)}return(e,a)=>{const l=u,t=_,s=k;return r(),o(l,{class:c(M.value),style:i(e.customStyle),onClick:oe},{default:d(()=>[e.label||e.$slots.label?(r(),o(l,{key:0,class:c(D.value),style:i(X.value)},{default:d(()=>[e.prefixIcon||e.$slots.prefix?(r(),o(l,{key:0,class:"wd-input__prefix"},{default:d(()=>[e.prefixIcon&&!e.$slots.prefix?(r(),o(P,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:se},null,8,["name"])):v(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})):n("",!0),w(l,{class:"wd-input__label-inner"},{default:d(()=>[e.label&&!e.$slots.label?(r(),h(b,{key:0},[g($(e.label),1)],64)):v(e.$slots,"label",{key:1},void 0,!0)]),_:3})]),_:3},8,["class","style"])):n("",!0),w(l,{class:"wd-input__body"},{default:d(()=>[w(l,{class:"wd-input__value"},{default:d(()=>[!e.prefixIcon&&!e.$slots.prefix||e.label?n("",!0):(r(),o(l,{key:0,class:"wd-input__prefix"},{default:d(()=>[e.prefixIcon&&!e.$slots.prefix?(r(),o(P,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:se},null,8,["name"])):v(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})),w(t,{class:c(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",L.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!C.value,modelValue:A.value,"onUpdate:modelValue":a[0]||(a[0]=e=>A.value=e),placeholder:W.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:I.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":U.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:ee,onFocus:Z,onBlur:Y,onConfirm:le,onKeyboardheightchange:ae},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),p.readonly?(r(),o(l,{key:1,class:"wd-input__readonly-mask"})):n("",!0),H.value||e.showPassword||e.suffixIcon||L.value||e.$slots.suffix?(r(),o(l,{key:2,class:"wd-input__suffix"},{default:d(()=>[H.value?(r(),o(P,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:Q})):n("",!0),e.showPassword?(r(),o(P,{key:1,"custom-class":"wd-input__icon",name:C.value?"view":"eye-close",onClick:J},null,8,["name"])):n("",!0),L.value?(r(),o(l,{key:2,class:"wd-input__count"},{default:d(()=>[w(s,{class:c([A.value&&String(A.value).length>0?"wd-input__count-current":"",String(A.value).length>e.maxlength?"is-error":""])},{default:d(()=>[g($(String(A.value).length),1)]),_:1},8,["class"]),g(" /"+$(e.maxlength),1)]),_:1})):n("",!0),e.suffixIcon&&!e.$slots.suffix?(r(),o(P,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:te},null,8,["name"])):v(e.$slots,"suffix",{key:4},void 0,!0)]),_:3})):n("",!0)]),_:3}),R.value?(r(),o(l,{key:0,class:"wd-input__error-message"},{default:d(()=>[g($(R.value),1)]),_:1})):n("",!0)]),_:3})]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-b402172f"]]);export{M as _,K as a,R as u,L as w};
