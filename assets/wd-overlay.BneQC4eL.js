import{d as e,r as a,c as l,m as t,w as s,a as n,D as o,b as u,i as v,l as r,n as i,e as c,h as d,aH as w,C as $,G as m}from"./index-CNS4YNQM.js";import{b as f,a as y,c as p,O as C,l as b,p as h,j as k,m as T}from"./wd-icon.BUBiR9XW.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";const _=A(e({name:"wd-transition",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...p,show:y(!1),duration:{type:[Object,Number,Boolean],default:300},lazyRender:y(!1),name:[String,Array],destroy:y(!0),enterClass:f(""),enterActiveClass:f(""),enterToClass:f(""),leaveClass:f(""),leaveActiveClass:f(""),leaveToClass:f("")},emits:["click","before-enter","enter","before-leave","leave","after-leave","after-enter"],setup(e,{emit:w}){const $=e=>{let a=`${m.enterClass} ${m.enterActiveClass}`,l=`${m.enterToClass} ${m.enterActiveClass}`,t=`${m.leaveClass} ${m.leaveActiveClass}`,s=`${m.leaveToClass} ${m.leaveActiveClass}`;if(Array.isArray(e))for(let n=0;n<e.length;n++)a=`wd-${e[n]}-enter wd-${e[n]}-enter-active ${a}`,l=`wd-${e[n]}-enter-to wd-${e[n]}-enter-active ${l}`,t=`wd-${e[n]}-leave wd-${e[n]}-leave-active ${t}`,s=`wd-${e[n]}-leave-to wd-${e[n]}-leave-active ${s}`;else e&&(a=`wd-${e}-enter wd-${e}-enter-active ${a}`,l=`wd-${e}-enter-to wd-${e}-enter-active ${l}`,t=`wd-${e}-leave wd-${e}-leave-active ${t}`,s=`wd-${e}-leave-to wd-${e}-leave-active ${s}`);return{enter:a,"enter-to":l,leave:t,"leave-to":s}},m=e,f=w,y=a(!1),p=a(!1),T=a(""),A=a(!1),_=a(300),g=a(""),j=a(null),x=a(null),I=a(null),S=l(()=>`-webkit-transition-duration:${_.value}ms;transition-duration:${_.value}ms;${p.value||!m.destroy?"":"display: none;"}${m.customStyle}`),z=l(()=>`wd-transition ${m.customClass}  ${g.value}`);function B(){f("click")}function N(){j.value=new C(async e=>{try{const a=$(m.name),l=b(m.duration)?m.duration.enter:m.duration;T.value="enter",f("before-enter"),x.value=h(),await x.value,f("enter"),g.value=a.enter,_.value=l,x.value=h(),await x.value,y.value=!0,p.value=!0,x.value=h(),await x.value,x.value=null,A.value=!1,g.value=a["enter-to"],e()}catch(a){}})}function G(){A.value||(A.value=!0,"leave"===T.value?f("after-leave"):"enter"===T.value&&f("after-enter"),!m.show&&p.value&&(p.value=!1))}return t(()=>{m.show&&N()}),s(()=>m.show,e=>{e?(k(j.value)&&j.value.abort(),k(x.value)&&x.value.abort(),k(I.value)&&I.value.abort(),j.value=null,x.value=null,I.value=null,N()):async function(){if(!j.value)return A.value=!1,G();try{if(await j.value,!p.value)return;const e=$(m.name),a=b(m.duration)?m.duration.leave:m.duration;T.value="leave",f("before-leave"),_.value=a,I.value=h(),await I.value,f("leave"),g.value=e.leave,I.value=h(),await I.value,A.value=!1,g.value=e["leave-to"],I.value=function(e){return new C(a=>{const l=setTimeout(()=>{clearTimeout(l),a()},e)})}(_.value),await I.value,I.value=null,G(),j.value=null}catch(e){}}()},{deep:!0}),(e,a)=>{const l=v;return!e.lazyRender||y.value?(u(),n(l,{key:0,class:i(z.value),style:r(S.value),onTransitionend:G,onClick:B},{default:c(()=>[d(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])):o("",!0)}}}),[["__scopeId","data-v-1fc69211"]]);function g(e){const l=a(0),t=()=>{0===l.value&&(document.getElementsByTagName("body")[0].style.overflow="hidden"),l.value++},n=()=>{l.value>0&&(l.value--,0===l.value&&(document.getElementsByTagName("body")[0].style.overflow=""))},o=()=>{e()&&n()};return s(e,e=>{e?t():n()}),w(o),$(o),{lock:t,unlock:n}}const j=A(e({name:"wd-overlay",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...p,show:y(!1),duration:{type:[Object,Number,Boolean],default:300},lockScroll:y(!0),zIndex:T(10)},emits:["click"],setup(e,{emit:a}){const l=e,t=a;function s(){t("click")}function o(){}return g(()=>l.show&&l.lockScroll),(e,a)=>(u(),n(_,{show:e.show,name:"fade","custom-class":"wd-overlay",duration:e.duration,"custom-style":`z-index: ${e.zIndex}; ${e.customStyle}`,onClick:s,onTouchmove:a[0]||(a[0]=m(a=>e.lockScroll?o:"",["stop","prevent"]))},{default:c(()=>[d(e.$slots,"default",{},void 0,!0)]),_:3},8,["show","duration","custom-style"]))}}),[["__scopeId","data-v-ec0037f9"]]);export{j as a,g as u,_ as w};
