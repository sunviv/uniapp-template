import{d as e,a as l,b as o,e as a,f as t,i as s,n as u,k as n,t as d,z as i,l as c,v as r,r as m,g as p,c as f,w as v,m as w,y as b,h as _,p as x,F as y,K as h,j as k,B as V,G as g,H as C,u as $,A as j,x as K,I as S,L as z}from"./index-BOD3A8FT.js";import{_ as I}from"./wd-navbar.DDzeF409.js";import{_ as T}from"./wd-search.PnVSrTiy.js";import{c as U,a as P,b as F,m as N,w as O,x as H,y as B,u as G,g as L}from"./wd-icon.LKR1psam.js";import{_ as M}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{w as Q}from"./wd-popup.n6M9b1ex.js";import{q as A,p as E,r as R,c as q,u as D}from"./clickoutside.C3R8bWab.js";import{u as J,_ as W}from"./wd-button.OwS7naRg.js";import{u as X}from"./useChildren.DPvWBVpH.js";import{w as Y}from"./wd-overlay.CsKOzH7M.js";import{w as Z,a as ee}from"./wd-radio-group.DknPwcAh.js";import{_ as le}from"./wd-checkbox.DEFm-7zN.js";import{_ as oe}from"./wd-checkbox-group.DTQ2yTYQ.js";import"./wd-transition.DbpHPSYd.js";const ae=M(e({name:"wd-sort-button",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...U,modelValue:N(0),title:F(""),allowReset:P(!1),descFirst:P(!1),line:P(!0)},emits:["change","update:modelValue"],setup(e,{emit:r}){const m=e,p=r;function f(){let{modelValue:e,allowReset:l,descFirst:o}=m;o?0===e?e=-1:-1===e?e=1:1===e&&(e=l?0:-1):0===e?e=1:1===e?e=-1:-1===e&&(e=l?0:1),p("update:modelValue",e),p("change",{value:e})}return(e,r)=>{const m=s;return o(),l(m,{class:u(`wd-sort-button ${e.line?"wd-sort-button--line":""} ${e.customClass}`),style:c(e.customStyle),onClick:f},{default:a(()=>[t(m,{class:"wd-sort-button__wrapper"},{default:a(()=>[t(m,{class:u("wd-sort-button__left "+(0!==e.modelValue?"is-active":""))},{default:a(()=>[n(d(e.title),1)]),_:1},8,["class"]),t(m,{class:u("wd-sort-button__right "+(0!==e.modelValue?"is-active":""))},{default:a(()=>[1!==e.modelValue?(o(),l(O,{key:0,name:"arrow-up","custom-class":"wd-sort-button__icon-up"})):i("",!0),-1!==e.modelValue?(o(),l(O,{key:1,name:"arrow-down","custom-class":"wd-sort-button__icon-down"})):i("",!0)]),_:1},8,["class"])]),_:1})]),_:1},8,["class","style"])}}}),[["__scopeId","data-v-7c32d28f"]]),te=Symbol("wd-drop-menu"),se={...U,zIndex:N(12),direction:F("down"),modal:P(!0),closeOnClickModal:P(!0),duration:N(200)},ue=M(e({name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...U,customTitle:F(""),customIcon:F(""),modelValue:[String,Number],options:H(),disabled:P(!1),iconName:F("check"),title:String,icon:F("arrow-down"),iconSize:F("14px"),beforeToggle:Function,valueKey:F("value"),labelKey:F("label"),tipKey:F("tip"),customPopupClass:F(""),customPopupStyle:F("")},emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:V,emit:g}){const C=e,$=g,j=r(A,null),K=m(!1),S=m(!1),z=m(),I=m(12),T=m(!0),U=m(0),{parent:P}=J(te),{proxy:F}=p(),N=f(()=>{let e="";return e=K.value&&P?"down"===P.props.direction?`top: calc(var(--window-top) + ${P.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${P.offset.value}px)`:"",e});function H(){S.value&&(B(C.beforeToggle)?C.beforeToggle({status:!1,resolve:e=>{e&&G()}}):G())}function G(){S.value&&(S.value=!1)}function L(){S.value||(B(C.beforeToggle)?C.beforeToggle({status:!0,resolve:e=>{e&&M()}}):M())}function M(){K.value=!0,S.value=!0,P&&(T.value=Boolean(P.props.modal),U.value=Number(P.props.duration),z.value="down"===P.props.direction?"top":"bottom")}function q(){K.value=!1,$("closed")}function D(){$("open")}function W(){$("opened")}function X(){$("close")}return v(()=>C.modelValue,e=>{},{deep:!0,immediate:!0}),w(()=>{j&&j.pushToQueue?j.pushToQueue(F):E(F)}),b(()=>{j&&j.removeFromQueue?j.removeFromQueue(F):R(F)}),V({getShowPop:function(){return S.value},open:L,close:H,toggle:function(){S.value?H():L()}}),(e,r)=>{const m=k,p=s;return K.value?(o(),l(p,{key:0,class:u(`wd-drop-item  ${e.customClass}`),style:c(`pointer-events: none; z-index: ${I.value}; ${N.value};${e.customStyle}`)},{default:a(()=>[t(Q,{modelValue:S.value,"onUpdate:modelValue":r[0]||(r[0]=e=>S.value=e),"z-index":I.value,duration:U.value,position:z.value,"custom-style":`position: absolute; pointer-events: auto; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,modal:!1,"close-on-click-modal":!1,onBeforeEnter:D,onAfterEnter:W,onBeforeLeave:X,onAfterLeave:q},{default:a(()=>[e.options.length?(o(),l(p,{key:0},{default:a(()=>[(o(!0),x(y,null,h(e.options,(s,c)=>(o(),l(p,{key:c,onClick:e=>function(e){if(C.disabled)return;const{valueKey:l}=C,o=C.options[e],a=void 0!==o[l]?o[l]:o;$("update:modelValue",a),$("change",{value:a,selectedItem:o}),H()}(c),class:u("wd-drop-item__option "+((""!==s[e.valueKey]?s[e.valueKey]:s)===e.modelValue?"is-active":""))},{default:a(()=>[t(p,{class:u(`wd-drop-item__title ${e.customTitle}`)},{default:a(()=>[t(m,null,{default:a(()=>[n(d(s[e.labelKey]?s[e.labelKey]:s),1)]),_:2},1024),s[e.tipKey]?(o(),l(m,{key:0,class:"wd-drop-item__tip"},{default:a(()=>[n(d(s[e.tipKey]),1)]),_:2},1024)):i("",!0)]),_:2},1032,["class"]),(""!==s[e.valueKey]?s[e.valueKey]:s)===e.modelValue?(o(),l(O,{key:0,name:e.iconName,size:"20px",class:u(`wd-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):i("",!0)]),_:2},1032,["onClick","class"]))),128))]),_:1})):_(e.$slots,"default",{key:1},void 0,!0)]),_:3},8,["modelValue","z-index","duration","position","custom-style","custom-class"])]),_:3},8,["class","style"])):i("",!0)}}}),[["__scopeId","data-v-716064ff"]]),ne=M(e({name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:se,setup(e){const i=e,b=r(A,null),k=m(`dropMenuId${G()}`),K=m(0),S=m(0),z=f(()=>"down"===i.direction?`top: calc(var(--window-top) + ${K.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${K.value}px)`),{proxy:I}=p(),{linkChildren:T,children:U}=X(te),P=f(()=>U.some(e=>e.$.exposed.getShowPop())),F=m(!1);let N;function H(){}function B(e){const{title:l,modelValue:o,options:a,valueKey:t,labelKey:s}=e;if(l)return l;for(let u=0,n=a.length;u<n;u++)if(o===a[u][t])return a[u][s]}function M(e){L(`#${k.value}`,!1,I).then(l=>{if(!l)return;const{top:o,bottom:a}=l;"down"===i.direction?K.value=Number(a):K.value=S.value-Number(o),e.$.exposed.toggle()})}function Q(){i.closeOnClickModal&&U.forEach(e=>{e.$.exposed.close()})}return v(P,e=>{N&&clearTimeout(N),e?F.value=!0:N=setTimeout(()=>{F.value=!1,N=null},16)}),T({props:i,fold:M,offset:K}),v(()=>i.direction,e=>{},{deep:!0,immediate:!0}),w(()=>{S.value=V().windowHeight}),(e,i)=>{const r=s,m=g(C("wd-icon"),O);return o(),l(r,{style:c(e.customStyle),class:u(`wd-drop-menu ${e.customClass}`),onClick:j(H,["stop","prevent"]),id:k.value},{default:a(()=>[t(Y,{show:F.value,duration:e.duration,"z-index":12,"custom-style":z.value,onClick:Q,onTouchmove:H},null,8,["show","duration","custom-style"]),t(r,{class:"wd-drop-menu__list"},{default:a(()=>[(o(!0),x(y,null,h($(U),(e,s)=>(o(),l(r,{key:s,onClick:l=>function(e){e&&!e.disabled&&(b&&b.closeOther?b.closeOther(e):q(e),M(e))}(e),class:u(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:a(()=>[t(r,{class:"wd-drop-menu__item-title"},{default:a(()=>[t(r,{class:"wd-drop-menu__item-title-text"},{default:a(()=>[n(d(B(e)),1)]),_:2},1024),t(m,{name:e.icon,size:e.iconSize,"custom-class":"wd-drop-menu__arrow"},null,8,["name","size"])]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1}),_(e.$slots,"default",{},void 0,!0)]),_:3},8,["style","class","id"])}}}),[["__scopeId","data-v-a49dc8da"]]),de=M(e({__name:"sort-drop",setup(e){const{closeOutside:u}=D(),i=m("");function c(){}const r=K({price:0,rating:0}),p=m(0),f=m([{label:"全部",value:0},{label:"条件一",value:1},{label:"条件二",value:2},{label:"这是比较长的筛选条件这是比较长的筛选条件",value:3}]);function v({value:e}){}const w=m(),b=m([{label:"选项一",value:"1"},{label:"选项二",value:"2"},{label:"选项三",value:"3"},{label:"选项四",value:"4"},{label:"选项五",value:"5"},{label:"选项六",value:"6"},{label:"这是比较长的筛选条件这是比较长的筛选条件这是比较长的筛选条件这是比较长的筛选条件",value:"7-1"},{label:"选项七",value:"7"},{label:"选项八",value:"8"},{label:"选项九",value:"9"}]),_=m([{label:"选项一",value:"1"},{label:"选项二",value:"2"},{label:"选项三",value:"3"},{label:"选项四",value:"4"},{label:"选项五",value:"5"},{label:"选项六",value:"6"},{label:"这是比较长的筛选条件这是比较长的筛选条件",value:"7-1"},{label:"选项七",value:"7"},{label:"选项八",value:"8"},{label:"选项九",value:"9"}]),k=m(""),V=m([]);function j(){}function U(){w.value.close()}function P(){k.value="",V.value=[],w.value.close()}function F(){z()}return(e,m)=>{const K=g(C("wd-navbar"),I),z=g(C("wd-search"),T),N=g(C("wd-sort-button"),ae),O=s,H=g(C("wd-drop-menu-item"),ue),B=g(C("wd-drop-menu"),ne),G=g(C("wd-radio"),Z),L=g(C("wd-radio-group"),ee),M=g(C("wd-checkbox"),le),Q=g(C("wd-checkbox-group"),oe),A=g(C("wd-button"),W);return o(),l(O,{class:"h-full flex flex-col"},{default:a(()=>[t(K,{"safe-area-inset-top":"","left-arrow":"",title:"搜索+下拉条件",onClickLeft:F,class:"safe-area-inset-top left-arrow"}),t(z,{modelValue:$(i),"onUpdate:modelValue":m[0]||(m[0]=e=>S(i)?i.value=e:null),"hide-cancel":"","placeholder-left":"",class:"flex-shrink-0 px-2 hide-cancel placeholder-left",onSearch:c},null,8,["modelValue"]),t(O,{class:"flex flex-nowrap justify-between bg-white px-4"},{default:a(()=>[t(O,{class:"w-140 flex-shrink-0",onClick:$(u)},{default:a(()=>[t(N,{modelValue:$(r).price,"onUpdate:modelValue":m[1]||(m[1]=e=>$(r).price=e),title:"价格","allow-reset":"",line:!0,class:"allow-reset"},null,8,["modelValue"])]),_:1},8,["onClick"]),t(O,{class:"w-140 flex-shrink-0",onClick:$(u)},{default:a(()=>[t(N,{modelValue:$(r).rating,"onUpdate:modelValue":m[2]||(m[2]=e=>$(r).rating=e),title:"评价","allow-reset":"",line:!0,class:"allow-reset"},null,8,["modelValue"])]),_:1},8,["onClick"]),t(B,{class:"ml-auto max-w-360"},{default:a(()=>[t(H,{modelValue:$(p),"onUpdate:modelValue":m[3]||(m[3]=e=>S(p)?p.value=e:null),"icon-size":"40rpx",icon:"filter",options:$(f),onChange:v},null,8,["modelValue","options"])]),_:1})]),_:1}),t(O,{class:"flex flex-nowrap justify-between bg-white px-4"},{default:a(()=>[t(O,{class:"w-140 flex-shrink-0",onClick:$(u)},{default:a(()=>[t(N,{modelValue:$(r).price,"onUpdate:modelValue":m[4]||(m[4]=e=>$(r).price=e),title:"价格","allow-reset":"",line:!0,class:"allow-reset"},null,8,["modelValue"])]),_:1},8,["onClick"]),t(O,{class:"w-140 flex-shrink-0",onClick:$(u)},{default:a(()=>[t(N,{modelValue:$(r).rating,"onUpdate:modelValue":m[5]||(m[5]=e=>$(r).rating=e),title:"评价","allow-reset":"",line:!0,class:"allow-reset"},null,8,["modelValue"])]),_:1},8,["onClick"]),t(B,{class:"ml-auto max-w-360"},{default:a(()=>[t(H,{ref_key:"dropMenu",ref:w,modelValue:$(p),"onUpdate:modelValue":m[8]||(m[8]=e=>S(p)?p.value=e:null),title:"自定义筛选","icon-size":"40rpx",icon:"filter","custom-popup-class":"flex flex-col !max-h-90%",onOpened:j},{default:a(()=>[t(O,{class:"flex-1 overflow-y-auto p-4"},{default:a(()=>[t(O,{class:"text-base text-font-color-primary font-medium"},{default:a(()=>[n(" 单选 ")]),_:1}),t(L,{modelValue:$(k),"onUpdate:modelValue":m[6]||(m[6]=e=>S(k)?k.value=e:null),cell:"",shape:"button",class:"mt-2 flex flex-wrap cell"},{default:a(()=>[(o(!0),x(y,null,h($(b),e=>(o(),l(G,{key:e.value,value:e.value,class:"filter-radio"},{default:a(()=>[n(d(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(O,{class:"mt-2 text-base text-font-color-primary font-medium"},{default:a(()=>[n(" 多选 ")]),_:1}),t(Q,{modelValue:$(V),"onUpdate:modelValue":m[7]||(m[7]=e=>S(V)?V.value=e:null),cell:"",shape:"button",class:"mt-2 flex flex-wrap cell"},{default:a(()=>[(o(!0),x(y,null,h($(_),e=>(o(),l(M,{key:e.value,"model-value":e.value,class:"filter-checkbox"},{default:a(()=>[n(d(e.label),1)]),_:2},1032,["model-value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(O,{class:"shadow-footer flex items-center justify-center px-6 py-2"},{default:a(()=>[t(A,{round:!1,plain:"",block:"",class:"flex-1 _el_mr-3 plain block",onClick:P},{default:a(()=>[n(" 重置 ")]),_:1}),t(A,{round:!1,block:"",type:"primary",class:"flex-1 block",onClick:U},{default:a(()=>[n(" 确定 ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-7d64abf1"]]);export{de as default};
