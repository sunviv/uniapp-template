import{d as e,r as a,w as l,o as s,c,a as u,b as o,e as t,f as r,h as d,z as n,i,l as h,j as v,n as f,k as p,t as m,u as _,at as w}from"./index-BOD3A8FT.js";import{b as y,a as C,m as b,c as g,o as x,p as k,w as S}from"./wd-icon.LKR1psam.js";import{a as V}from"./wd-button.OwS7naRg.js";import{_ as $}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=$(e({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...g,customInputClass:y(""),modelValue:y(""),useSuffixSlot:C(!1),placeholder:String,cancelTxt:String,light:C(!1),hideCancel:C(!1),disabled:C(!1),maxlength:b(-1),placeholderLeft:C(!1),focus:C(!1),focusWhenClear:C(!1),placeholderStyle:String,placeholderClass:y("")},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(e,{emit:y}){const C=e,b=y,{translate:g}=V("search"),$=a(!1),j=a(!1),I=a(""),L=a(!0),W=a(!1);l(()=>C.modelValue,e=>{I.value=e,e&&(j.value=!0)},{immediate:!0}),l(()=>C.focus,e=>{if(e){if(C.disabled)return;F()}}),s(()=>{C.focus&&F()});const T=c(()=>`wd-search  ${C.light?"is-light":""}  ${C.hideCancel?"is-without-cancel":""} ${C.customClass}`),z=c(()=>{const e={display:""===I.value&&L.value?"flex":"none"};return x(e)});async function B(e){j.value=e,await k(),$.value=e}async function F(){C.disabled||(await k(100),L.value=!1,B(!0))}function G(e){I.value=e.detail.value,b("update:modelValue",e.detail.value),b("change",{value:e.detail.value})}async function H(){I.value="",W.value=!0,C.focusWhenClear&&($.value=!1),await k(100),C.focusWhenClear?(L.value=!1,B(!0)):(L.value=!0,B(!1)),b("change",{value:""}),b("update:modelValue",""),b("clear")}function U({detail:{value:e}}){b("search",{value:e})}function q(){W.value?W.value=!1:(L.value=!1,b("focus",{value:I.value}))}function A(){W.value||(L.value=!I.value,j.value=!L.value,$.value=!1,b("blur",{value:I.value}))}function D(){b("cancel",{value:I.value})}return(e,a)=>{const l=v,s=i,c=w;return o(),u(s,{class:f(T.value),style:h(e.customStyle)},{default:t(()=>[r(s,{class:"wd-search__block"},{default:t(()=>[d(e.$slots,"prefix",{},void 0,!0),r(s,{class:"wd-search__field"},{default:t(()=>[e.placeholderLeft?n("",!0):(o(),u(s,{key:0,style:h(z.value),class:"wd-search__cover",onClick:F},{default:t(()=>[r(S,{name:"search","custom-class":"wd-search__search-icon"}),r(l,{class:f(`wd-search__placeholder-txt ${e.placeholderClass}`)},{default:t(()=>[p(m(e.placeholder||_(g)("search")),1)]),_:1},8,["class"])]),_:1},8,["style"])),j.value||I.value||e.placeholderLeft?(o(),u(S,{key:1,name:"search","custom-class":"wd-search__search-left-icon"})):n("",!0),j.value||I.value||e.placeholderLeft?(o(),u(c,{key:2,placeholder:e.placeholder||_(g)("search"),"placeholder-class":`wd-search__placeholder-txt ${e.placeholderClass}`,"placeholder-style":e.placeholderStyle,"confirm-type":"search",modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),class:f(["wd-search__input",e.customInputClass]),onFocus:q,onInput:G,onBlur:A,onConfirm:U,disabled:e.disabled,maxlength:e.maxlength,focus:$.value},null,8,["placeholder","placeholder-class","placeholder-style","modelValue","class","disabled","maxlength","focus"])):n("",!0),I.value?(o(),u(S,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",onClick:H})):n("",!0)]),_:1})]),_:3}),e.hideCancel?n("",!0):d(e.$slots,"suffix",{key:0},()=>[r(s,{class:"wd-search__cancel",onClick:D},{default:t(()=>[p(m(e.cancelTxt||_(g)("cancel")),1)]),_:1})],!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-6bb79eb7"]]);export{j as _};
