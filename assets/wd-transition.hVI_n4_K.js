import{d as e,r as a,c as l,m as t,w as n,a as s,z as v,b as u,i as r,l as o,n as i,e as c,h as d}from"./index-Bm-17c-5.js";import{b as $,a as w,c as f,P as m,q as y,p as C,j as p}from"./wd-icon.DJgfGrbg.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h=b(e({name:"wd-transition",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...f,show:w(!1),duration:{type:[Object,Number,Boolean],default:300},lazyRender:w(!1),name:[String,Array],destroy:w(!0),enterClass:$(""),enterActiveClass:$(""),enterToClass:$(""),leaveClass:$(""),leaveActiveClass:$(""),leaveToClass:$("")},emits:["click","before-enter","enter","before-leave","leave","after-leave","after-enter"],setup(e,{emit:$}){const w=e=>{let a=`${f.enterClass} ${f.enterActiveClass}`,l=`${f.enterToClass} ${f.enterActiveClass}`,t=`${f.leaveClass} ${f.leaveActiveClass}`,n=`${f.leaveToClass} ${f.leaveActiveClass}`;if(Array.isArray(e))for(let s=0;s<e.length;s++)a=`wd-${e[s]}-enter wd-${e[s]}-enter-active ${a}`,l=`wd-${e[s]}-enter-to wd-${e[s]}-enter-active ${l}`,t=`wd-${e[s]}-leave wd-${e[s]}-leave-active ${t}`,n=`wd-${e[s]}-leave-to wd-${e[s]}-leave-active ${n}`;else e&&(a=`wd-${e}-enter wd-${e}-enter-active ${a}`,l=`wd-${e}-enter-to wd-${e}-enter-active ${l}`,t=`wd-${e}-leave wd-${e}-leave-active ${t}`,n=`wd-${e}-leave-to wd-${e}-leave-active ${n}`);return{enter:a,"enter-to":l,leave:t,"leave-to":n}},f=e,b=$,h=a(!1),A=a(!1),T=a(""),_=a(!1),j=a(300),k=a(""),g=a(null),x=a(null),z=a(null),I=l(()=>`-webkit-transition-duration:${j.value}ms;transition-duration:${j.value}ms;${A.value||!f.destroy?"":"display: none;"}${f.customStyle}`),R=l(()=>`wd-transition ${f.customClass}  ${k.value}`);function S(){b("click")}function q(){g.value=new m(async e=>{try{const a=w(f.name),l=y(f.duration)?f.duration.enter:f.duration;T.value="enter",b("before-enter"),x.value=C(),await x.value,b("enter"),k.value=a.enter,j.value=l,x.value=C(),await x.value,h.value=!0,A.value=!0,x.value=C(),await x.value,x.value=null,_.value=!1,k.value=a["enter-to"],e()}catch(a){}})}function B(){_.value||(_.value=!0,"leave"===T.value?b("after-leave"):"enter"===T.value&&b("after-enter"),!f.show&&A.value&&(A.value=!1))}return t(()=>{f.show&&q()}),n(()=>f.show,e=>{e?(p(g.value)&&g.value.abort(),p(x.value)&&x.value.abort(),p(z.value)&&z.value.abort(),g.value=null,x.value=null,z.value=null,q()):async function(){if(!g.value)return _.value=!1,B();try{if(await g.value,!A.value)return;const e=w(f.name),a=y(f.duration)?f.duration.leave:f.duration;T.value="leave",b("before-leave"),j.value=a,z.value=C(),await z.value,b("leave"),k.value=e.leave,z.value=C(),await z.value,_.value=!1,k.value=e["leave-to"],z.value=function(e){return new m(a=>{const l=setTimeout(()=>{clearTimeout(l),a()},e)})}(j.value),await z.value,z.value=null,B(),g.value=null}catch(e){}}()},{deep:!0}),(e,a)=>{const l=r;return!e.lazyRender||h.value?(u(),s(l,{key:0,class:i(R.value),style:o(I.value),onTransitionend:B,onClick:S},{default:c(()=>[d(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])):v("",!0)}}}),[["__scopeId","data-v-1fc69211"]]);export{h as w};
