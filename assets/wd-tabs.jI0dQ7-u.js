import{d as e,g as t,c as a,r as s,w as l,a as o,b as i,e as n,z as d,i as c,l as u,n as r,h as p,k as m,t as h,o as b,O as _,f as v,S as f,u as w,x as y,P as g,m as x,Q as $,G as k,H as C,p as I,F as S,K as N,R as T,T as z,j as L}from"./index-BOD3A8FT.js";import{b as V,m as H,a as P,r as R,s as j,c as G,h as W,o as M,n as D,i as E,e as F,u as X,p as B,g as O,t as Z,w as q,v as A}from"./wd-icon.LKR1psam.js";import{u as K,a as Q}from"./wd-button.OwS7naRg.js";import{_ as J}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{u as U}from"./useChildren.DPvWBVpH.js";import{u as Y}from"./useTouch.BJ-dbCQ8.js";const ee=Symbol("wd-tabs"),te={...G,modelValue:j(0),slidableNum:H(6),mapNum:H(10),mapTitle:String,sticky:P(!1),offsetTop:H(0),swipeable:P(!1),autoLineWidth:P(!1),lineWidth:R,lineHeight:R,color:V(""),inactiveColor:V(""),animated:P(!1),duration:H(300),slidable:V("auto")},ae=J(e({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...G,name:R,title:String,disabled:P(!1),lazy:P(!0),badgeProps:Object},setup(e){const m=e,{proxy:h}=t(),{parent:b,index:_}=K(ee),v=a(()=>!!W(b)&&b.state.activeIndex===_.value),f=s(v.value),w=a(()=>{const e={};return v.value||W(b)&&b.props.animated||(e.display="none"),M(e)}),y=a(()=>!m.lazy||f.value||v.value);return l(v,e=>{e&&(f.value=!0)}),l(()=>m.name,e=>{(!W(e)||D(e)||E(e))&&b&&function(e){const{name:t}=m;if(null==t||""===t)return;b&&b.children.forEach(t=>{t.$.uid!==e.$.uid&&t.name})}(h)},{deep:!0,immediate:!0}),(e,t)=>{const a=c;return i(),o(a,{class:r(`wd-tab ${e.customClass}`),style:u(e.customStyle)},{default:n(()=>[y.value?(i(),o(a,{key:0,class:r(["wd-tab__body",{"wd-tab__body--inactive":!v.value}]),style:u(w.value)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])):d("",!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-9d733961"]]),se=J(e({name:"wd-badge",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...G,modelValue:R,showZero:P(!1),bgColor:String,max:Number,isDot:Boolean,hidden:Boolean,type:V(void 0),top:R,right:R},setup(e){const t=e,s=a(()=>{const{modelValue:e,max:a,isDot:s}=t;if(s)return"";let l=e;return l&&a&&D(l)&&!Number.isNaN(l)&&!Number.isNaN(a)&&(l=a<l?`${a}+`:l),l}),l=a(()=>{const e={};return W(t.bgColor)&&(e.backgroundColor=t.bgColor),W(t.top)&&(e.top=F(t.top)),W(t.right)&&(e.right=F(t.right)),M(e)}),b=a(()=>!t.hidden&&(s.value||0===s.value&&t.showZero||t.isDot));return(e,t)=>{const a=c;return i(),o(a,{class:r(["wd-badge",e.customClass]),style:u(e.customStyle)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0),b.value?(i(),o(a,{key:0,class:r(["wd-badge__content","is-fixed",e.type?"wd-badge__content--"+e.type:"",e.isDot?"is-dot":""]),style:u(l.value)},{default:n(()=>[m(h(s.value),1)]),_:1},8,["class","style"])):d("",!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-019b04f1"]]),le=J(e({name:"wd-resize",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...G,customContainerClass:V("")},emits:["resize"],setup(e,{emit:l}){const d=e,m=l,h=s(0),y=s(0),g=s(0),x=s(0),$=s(0),k=s(0),C=s(0),I=a(()=>{const e={width:F(k.value),height:F($.value)};return`${M(e)}${d.customStyle}`});let S=()=>{};const{proxy:N}=t(),T=s(`resize${X()}`);function z({lastWidth:e,lastHeight:t}){h.value=1e5+t,y.value=3*$.value+t,g.value=1e5+e,x.value=3*k.value+e}return b(()=>{_().in(N).select(`#${T.value}`).boundingClientRect().exec(([e])=>{let t=e.height,a=e.width;$.value=t,k.value=a,S=()=>{_().in(N).select(`#${T.value}`).boundingClientRect().exec(([e])=>{if(0===C.value++){const t={};["bottom","top","left","right","height","width"].forEach(a=>{t[a]=e[a]}),m("resize",t)}if(C.value<3)return;const s=e.height,l=e.width;$.value=s,k.value=l;const o=[];if(s!==t&&(t=s,o.push(1)),l!==a&&(a=l,o.push(1)),0!==o.length){const t={};["bottom","top","left","right","height","width"].forEach(a=>{t[a]=e[a]}),m("resize",t)}z({lastWidth:a,lastHeight:t})})},z({lastWidth:a,lastHeight:t})})}),(e,t)=>{const a=c,s=f;return i(),o(a,{class:r(`wd-resize ${e.customClass}`),style:u(I.value)},{default:n(()=>[v(a,{id:T.value,class:r(`wd-resize__container ${e.customContainerClass}`)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0),v(s,{class:"wd-resize__wrapper","scroll-y":!0,"scroll-top":h.value,"scroll-x":!0,"scroll-left":g.value,onScroll:w(S)},{default:n(()=>[v(a,{class:"wd-resize__wrapper--placeholder",style:{height:"100000px",width:"100000px"}})]),_:1},8,["scroll-top","scroll-left","onScroll"]),v(s,{class:"wd-resize__wrapper","scroll-y":!0,"scroll-top":y.value,"scroll-x":!0,"scroll-left":x.value,onScroll:w(S)},{default:n(()=>[v(a,{class:"wd-resize__wrapper--placeholder",style:{height:"250%",width:"250%"}})]),_:1},8,["scroll-top","scroll-left","onScroll"])]),_:3},8,["id","class"])]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-62bdf40e"]]),oe={...G,zIndex:H(1),offsetTop:H(0)},ie=Symbol("wd-sticky-box"),ne=J(e({name:"wd-sticky",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:oe,setup(e,{expose:l}){const d=e,m=s(`wd-sticky${X()}`),h=s([]),b=y({position:"absolute",boxLeaved:!1,top:0,height:0,width:0,state:""}),{parent:_}=K(ie),{proxy:f}=t(),w=a(()=>{const e={"z-index":d.zIndex,height:F(b.height),width:F(b.width)};return b.boxLeaved||(e.position="relative"),`${M(e)}${d.customStyle}`}),x=a(()=>{const e={"z-index":d.zIndex,height:F(b.height),width:F(b.width)};return b.boxLeaved||(e.position="relative"),`${M(e)}`}),$=a(()=>{const e={position:b.position,top:F(b.top)};return M(e)}),k=a(()=>{let e=0;return e=44,44+d.offsetTop});async function C(e){b.width=e.width,b.height=e.height,await B(),function(){if(0===b.height&&0===b.width)return;const e=k.value+b.height;(function(){for(;0!==h.value.length;)h.value.pop().disconnect()})(),function(){const e=g(f,{thresholds:[0,.5]});return h.value.push(e),e}().relativeToViewport({top:-e}).observe(`#${m.value}`,e=>{I(e)}),O(`#${m.value}`,!1,f).then(t=>{t.bottom=Number(t.bottom)+44,Number(t.bottom)<=e&&I({boundingClientRect:t})})}(),_&&_.observerForChild&&_.observerForChild(f)}function I({boundingClientRect:e}){if(_&&_.boxStyle&&b.height>=_.boxStyle.height)return b.position="absolute",void(b.top=0);let t=e.top<=k.value;t=e.top<k.value,t?(b.state="sticky",b.boxLeaved=!1,b.position="fixed",b.top=k.value):(b.state="normal",b.boxLeaved=!1,b.position="absolute",b.top=0)}return l({setPosition:function(e,t,a){b.boxLeaved=e,b.position=t,b.top=a},stickyState:b,offsetTop:d.offsetTop}),(e,t)=>{const a=c;return i(),o(a,{style:u(`${w.value};display: inline-block;`)},{default:n(()=>[v(a,{class:r(`wd-sticky ${e.customClass}`),style:u(x.value),id:m.value},{default:n(()=>[v(a,{class:"wd-sticky__container",style:u($.value)},{default:n(()=>[v(le,{onResize:C,"custom-style":"display: inline-block;"},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["style"])]),_:3},8,["class","style","id"])]),_:3},8,["style"])}}}),[["__scopeId","data-v-8d1fe2cc"]]),de=J(e({name:"wd-sticky-box",options:{addGlobalClass:!0,styleIsolation:"shared"},props:G,setup(e){const a=e,l=s(`wd-sticky-box${X()}`),d=s(new Map),m=y({height:0,width:0}),{proxy:h}=t(),{children:b,linkChildren:_}=U(ie);function f(e){m.width=e.width,m.height=e.height;const t=d.value;d.value=new Map;for(const[a]of t){w(b.find(e=>e.$.uid===a))}t.forEach(e=>{e.disconnect()}),t.clear()}function w(e){!function(e){const t=d.value.get(e.$.uid);t&&(t.disconnect(),d.value.delete(e.$.uid))}(e);const t=function(e){const t=g(h,{thresholds:[0,.5]});return d.value.set(e.$.uid,t),t}(e),a=e.$.exposed;let s=a.stickyState.height+a.offsetTop;s+=44,m.height<=a.stickyState.height&&a.setPosition(!1,"absolute",0),t.relativeToViewport({top:-s}).observe(`#${l.value}`,e=>{$(a,e)}),O(`#${l.value}`,!1,h).then(e=>{e.bottom=Number(e.bottom)+44,Number(e.bottom)<=s&&$(a,{boundingClientRect:e})}).catch(e=>{})}function $(e,{boundingClientRect:t}){let a=e.offsetTop;a+=44;const s=e.stickyState.height+a;let l=t.bottom<=s;if(l=t.bottom<s,l)e.setPosition(!0,"absolute",t.height-e.stickyState.height);else if(t.top<=s&&!l){if("normal"===e.stickyState.state)return;e.setPosition(!1,"fixed",a)}}return _({boxStyle:m,observerForChild:w}),x(()=>{d.value=new Map}),(e,t)=>{const s=c;return i(),o(s,{style:{position:"relative"}},{default:n(()=>[v(s,{class:r(`wd-sticky-box ${a.customClass}`),style:u(e.customStyle),id:l.value},{default:n(()=>[v(le,{onResize:f},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["class","style","id"])]),_:3})}}}),[["__scopeId","data-v-19ffe98b"]]),ce=J(e({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:te,emits:["change","disabled","click","update:modelValue"],setup(e,{expose:s,emit:_}){const g=".wd-tabs__nav-item",x=e,V=_,{translate:H}=Q("tabs"),P=y({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:R,linkChildren:j}=U(ee);j({state:P,props:x});const{proxy:G}=t(),X=Y(),B=a(()=>"always"===x.slidable||R.length>x.slidableNum),K=a(()=>x.animated?M({left:-100*P.activeIndex+"%","transition-duration":x.duration+"ms","-webkit-transition-duration":x.duration+"ms"}):""),J=(e,t)=>W(e.name)?e.name:t,te=(e=0,t=!1,a=!0)=>{0!==R.length&&(e=me(e),R[e].disabled||(P.activeIndex=e,a&&(oe(!1===t),ie()),function(){if(!P.inited)return;const e=J(R[P.activeIndex],P.activeIndex);e!==x.modelValue&&(V("change",{index:P.activeIndex,name:e}),V("update:modelValue",e))}()))},ae=Z(te,100,{leading:!0});function le(){P.mapShow?(P.animating=!1,setTimeout(()=>{P.mapShow=!1},300)):(P.mapShow=!0,setTimeout(()=>{P.animating=!0},100))}async function oe(e=!0){if(!P.inited)return;const{autoLineWidth:t,lineWidth:a,lineHeight:s}=x;try{const l={};if(W(a))l.width=F(a);else if(t){const e=await O(".wd-tabs__nav-item-text",!0,G),t=Number(e[P.activeIndex].width);l.width=F(t)}W(s)&&(l.height=F(s),l.borderRadius=`calc(${F(s)} / 2)`);const o=await O(g,!0,G),i=o[P.activeIndex];let n=o.slice(0,P.activeIndex).reduce((e,t)=>e+Number(t.width),0)+Number(i.width)/2;n&&(l.transform=`translateX(${n}px) translateX(-50%)`,e&&(l.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),P.useInnerLine=!1,P.lineStyle=M(l))}catch(l){}}function ie(){P.inited&&Promise.all([O(g,!0,G),O(".wd-tabs__nav-container",!1,G)]).then(([e,t])=>{const a=e[P.activeIndex],s=e.slice(0,P.activeIndex).reduce((e,t)=>e+t.width,0)-(t.width-Number(a.width))/2;s===P.scrollLeft?P.scrollLeft=s+Math.random()/1e4:P.scrollLeft=s})}function ce(e){if(void 0===e)return;const{disabled:t}=R[e],a=J(R[e],e);t?V("disabled",{index:e,name:a}):(P.mapShow&&le(),ae(e),V("click",{index:e,name:a}))}function ue(e){x.swipeable&&X.touchStart(e)}function re(e){x.swipeable&&X.touchMove(e)}function pe(){if(!x.swipeable)return;const{direction:e,deltaX:t,offsetX:a}=X;"horizontal"===e.value&&a.value>=50&&(t.value>0&&0!==P.activeIndex?ae(P.activeIndex-1):t.value<0&&P.activeIndex!==R.length-1&&ae(P.activeIndex+1))}function me(e){if(D(e)&&e>=R.length&&(e=0),E(e)){const t=R.findIndex(t=>t.name===e);e=-1===t?0:t}return e}return l(()=>x.modelValue,e=>{!D(e)&&E(e)},{immediate:!0,deep:!0}),l(()=>x.modelValue,e=>{const t=me(e);ae(e,!1,t!==P.activeIndex)},{immediate:!1,deep:!0}),l(()=>R.length,()=>{P.inited&&$(()=>{ae(x.modelValue)})}),l(()=>x.slidableNum,e=>{A(e,"slidableNum")}),l(()=>x.mapNum,e=>{A(e,"mapNum")}),b(()=>{P.inited=!0,$(()=>{te(x.modelValue,!0),P.useInnerLine=!0})}),s({setActive:ae,scrollIntoView:ie,updateLineStyle:oe}),(e,t)=>{const a=L,s=k(C("wd-badge"),se),l=c,b=f;return e.sticky?(i(),o(de,{key:0},{default:n(()=>[v(l,{class:r(`wd-tabs ${e.customClass} ${B.value?"is-slide":""} ${e.mapNum<w(R).length&&0!==e.mapNum?"is-map":""}`),style:u(e.customStyle)},{default:n(()=>[v(ne,{"offset-top":e.offsetTop},{default:n(()=>[v(l,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:n(()=>[v(l,{class:"wd-tabs__nav--wrap"},{default:n(()=>[v(b,{"scroll-x":B.value,"scroll-with-animation":"","scroll-left":P.scrollLeft},{default:n(()=>[v(l,{class:"wd-tabs__nav-container"},{default:n(()=>[(i(!0),I(S,null,N(w(R),(t,c)=>(i(),o(l,{onClick:e=>ce(c),key:c,class:r(`wd-tabs__nav-item  ${P.activeIndex===c?"is-active":""} ${t.disabled?"is-disabled":""}`),style:u(P.activeIndex===c?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:n(()=>[t.badgeProps?(i(),o(s,T(z({key:0},t.badgeProps)),{default:n(()=>[v(a,{class:"wd-tabs__nav-item-text"},{default:n(()=>[m(h(t.title),1)]),_:2},1024)]),_:2},1040)):(i(),o(a,{key:1,class:"wd-tabs__nav-item-text"},{default:n(()=>[m(h(t.title),1)]),_:2},1024)),P.activeIndex===c&&P.useInnerLine?(i(),o(l,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):d("",!0)]),_:2},1032,["onClick","class","style"]))),128)),v(l,{class:"wd-tabs__line",style:u(P.lineStyle)},null,8,["style"])]),_:1})]),_:1},8,["scroll-x","scroll-left"])]),_:1}),e.mapNum<w(R).length&&0!==e.mapNum?(i(),o(l,{key:0,class:"wd-tabs__map"},{default:n(()=>[v(l,{class:r("wd-tabs__map-btn  "+(P.animating?"is-open":"")),onClick:le},{default:n(()=>[v(l,{class:r("wd-tabs__map-arrow  "+(P.animating?"is-open":""))},{default:n(()=>[v(q,{name:"arrow-down"})]),_:1},8,["class"])]),_:1},8,["class"]),v(l,{class:"wd-tabs__map-header",style:u(`${P.mapShow?"":"display:none;"}  ${P.animating?"opacity:1;":""}`)},{default:n(()=>[m(h(e.mapTitle||w(H)("all")),1)]),_:1},8,["style"]),v(l,{class:r("wd-tabs__map-body  "+(P.animating?"is-open":"")),style:u(P.mapShow?"":"display:none")},{default:n(()=>[(i(!0),I(S,null,N(w(R),(t,a)=>(i(),o(l,{class:"wd-tabs__map-nav-item",key:a,onClick:e=>ce(a)},{default:n(()=>[v(l,{class:r(`wd-tabs__map-nav-btn ${P.activeIndex===a?"is-active":""}  ${t.disabled?"is-disabled":""}`),style:u(P.activeIndex===a?e.color?"color:"+e.color+";border-color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:n(()=>[m(h(t.title),1)]),_:2},1032,["class","style"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["class","style"])]),_:1})):d("",!0)]),_:1})]),_:1},8,["offset-top"]),v(l,{class:"wd-tabs__container",onTouchstart:ue,onTouchmove:re,onTouchend:pe,onTouchcancel:pe},{default:n(()=>[v(l,{class:r(["wd-tabs__body",e.animated?"is-animated":""]),style:u(K.value)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])]),_:3}),v(l,{class:"wd-tabs__mask",style:u(`${P.mapShow?"":"display:none;"} ${P.animating?"opacity:1;":""}`),onClick:le},null,8,["style"])]),_:3},8,["class","style"])]),_:3})):(i(),o(l,{key:1,class:r(`wd-tabs ${e.customClass} ${B.value?"is-slide":""} ${e.mapNum<w(R).length&&0!==e.mapNum?"is-map":""}`)},{default:n(()=>[v(l,{class:"wd-tabs__nav"},{default:n(()=>[v(l,{class:"wd-tabs__nav--wrap"},{default:n(()=>[v(b,{"scroll-x":B.value,"scroll-with-animation":"","scroll-left":P.scrollLeft},{default:n(()=>[v(l,{class:"wd-tabs__nav-container"},{default:n(()=>[(i(!0),I(S,null,N(w(R),(t,c)=>(i(),o(l,{onClick:e=>ce(c),key:c,class:r(`wd-tabs__nav-item ${P.activeIndex===c?"is-active":""} ${t.disabled?"is-disabled":""}`),style:u(P.activeIndex===c?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:n(()=>[t.badgeProps?(i(),o(s,z({key:0,"custom-class":"wd-tabs__nav-item-badge"},t.badgeProps),{default:n(()=>[v(a,{class:"wd-tabs__nav-item-text"},{default:n(()=>[m(h(t.title),1)]),_:2},1024)]),_:2},1040)):(i(),o(a,{key:1,class:"wd-tabs__nav-item-text"},{default:n(()=>[m(h(t.title),1)]),_:2},1024)),P.activeIndex===c&&P.useInnerLine?(i(),o(l,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):d("",!0)]),_:2},1032,["onClick","class","style"]))),128)),v(l,{class:"wd-tabs__line",style:u(P.lineStyle)},null,8,["style"])]),_:1})]),_:1},8,["scroll-x","scroll-left"])]),_:1}),e.mapNum<w(R).length&&0!==e.mapNum?(i(),o(l,{key:0,class:"wd-tabs__map"},{default:n(()=>[v(l,{class:"wd-tabs__map-btn",onClick:le},{default:n(()=>[v(l,{class:r("wd-tabs__map-arrow "+(P.animating?"is-open":""))},{default:n(()=>[v(q,{name:"arrow-down"})]),_:1},8,["class"])]),_:1}),v(l,{class:"wd-tabs__map-header",style:u(`${P.mapShow?"":"display:none;"}  ${P.animating?"opacity:1;":""}`)},{default:n(()=>[m(h(e.mapTitle||w(H)("all")),1)]),_:1},8,["style"]),v(l,{class:r("wd-tabs__map-body "+(P.animating?"is-open":"")),style:u(P.mapShow?"":"display:none")},{default:n(()=>[(i(!0),I(S,null,N(w(R),(e,t)=>(i(),o(l,{class:"wd-tabs__map-nav-item",key:t,onClick:e=>ce(t)},{default:n(()=>[v(l,{class:r(`wd-tabs__map-nav-btn ${P.activeIndex===t?"is-active":""}  ${e.disabled?"is-disabled":""}`)},{default:n(()=>[m(h(e.title),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["class","style"])]),_:1})):d("",!0)]),_:1}),v(l,{class:"wd-tabs__container",onTouchstart:ue,onTouchmove:re,onTouchend:pe,onTouchcancel:pe},{default:n(()=>[v(l,{class:r(["wd-tabs__body",e.animated?"is-animated":""]),style:u(K.value)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])]),_:3}),v(l,{class:"wd-tabs__mask",style:u(`${P.mapShow?"":"display:none;"}  ${P.animating?"opacity:1":""}`),onClick:le},null,8,["style"])]),_:3},8,["class"]))}}}),[["__scopeId","data-v-dbb5bc2a"]]);export{ae as _,ce as a,ne as b};
