import{d as e,r as a,w as l,o as s,c,a as u,b as o,e as t,f as r,h as n,D as d,i,l as h,j as v,n as f,k as p,t as m,u as _,as as w}from"./index-CSAJBPP5.js";import{b as y,a as C,m as x,c as g,o as b,p as k,w as S}from"./wd-icon.g2y9GXSC.js";import{a as V}from"./useTranslate.P2iqfX5g.js";import{_ as $}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=$(e({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...g,customInputClass:y(""),modelValue:y(""),useSuffixSlot:C(!1),placeholder:String,cancelTxt:String,light:C(!1),hideCancel:C(!1),disabled:C(!1),maxlength:x(-1),placeholderLeft:C(!1),focus:C(!1),focusWhenClear:C(!1),placeholderStyle:String,placeholderClass:y("")},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(e,{emit:y}){const C=e,x=y,{translate:g}=V("search"),$=a(!1),j=a(!1),I=a(""),L=a(!0),T=a(!1);l(()=>C.modelValue,e=>{I.value=e,e&&(j.value=!0)},{immediate:!0}),l(()=>C.focus,e=>{if(e){if(C.disabled)return;F()}}),s(()=>{C.focus&&F()});const W=c(()=>`wd-search  ${C.light?"is-light":""}  ${C.hideCancel?"is-without-cancel":""} ${C.customClass}`),B=c(()=>{const e={display:""===I.value&&L.value?"flex":"none"};return b(e)});async function D(e){j.value=e,await k(),$.value=e}async function F(){C.disabled||(await k(100),L.value=!1,D(!0))}function G(e){I.value=e.detail.value,x("update:modelValue",e.detail.value),x("change",{value:e.detail.value})}async function H(){I.value="",C.focusWhenClear&&(T.value=!0,$.value=!1),await k(),C.focusWhenClear?(L.value=!1,D(!0)):(L.value=!0,D(!1)),x("change",{value:""}),x("update:modelValue",""),x("clear")}function U({detail:{value:e}}){x("search",{value:e})}function q(){L.value=!1,x("focus",{value:I.value})}async function z(){await k(150),T.value?T.value=!1:(L.value=!I.value,j.value=!L.value,$.value=!1,x("blur",{value:I.value}))}function A(){x("cancel",{value:I.value})}return(e,a)=>{const l=v,s=i,c=w;return o(),u(s,{class:f(W.value),style:h(e.customStyle)},{default:t(()=>[r(s,{class:"wd-search__block"},{default:t(()=>[n(e.$slots,"prefix",{},void 0,!0),r(s,{class:"wd-search__field"},{default:t(()=>[e.placeholderLeft?d("",!0):(o(),u(s,{key:0,style:h(B.value),class:"wd-search__cover",onClick:F},{default:t(()=>[r(S,{name:"search","custom-class":"wd-search__search-icon"}),r(l,{class:f(`wd-search__placeholder-txt ${e.placeholderClass}`)},{default:t(()=>[p(m(e.placeholder||_(g)("search")),1)]),_:1},8,["class"])]),_:1},8,["style"])),j.value||I.value||e.placeholderLeft?(o(),u(S,{key:1,name:"search","custom-class":"wd-search__search-left-icon"})):d("",!0),j.value||I.value||e.placeholderLeft?(o(),u(c,{key:2,placeholder:e.placeholder||_(g)("search"),"placeholder-class":`wd-search__placeholder-txt ${e.placeholderClass}`,"placeholder-style":e.placeholderStyle,"confirm-type":"search",modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),class:f(["wd-search__input",e.customInputClass]),onFocus:q,onInput:G,onBlur:z,onConfirm:U,disabled:e.disabled,maxlength:e.maxlength,focus:$.value},null,8,["placeholder","placeholder-class","placeholder-style","modelValue","class","disabled","maxlength","focus"])):d("",!0),I.value?(o(),u(S,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",onClick:H})):d("",!0)]),_:1})]),_:3}),e.hideCancel?d("",!0):n(e.$slots,"suffix",{key:0},()=>[r(s,{class:"wd-search__cancel",onClick:A},{default:t(()=>[p(m(e.cancelTxt||_(g)("cancel")),1)]),_:1})],!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-7650d631"]]);export{j as _};
