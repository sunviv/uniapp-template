import{r as e,w as l,aG as a,y as s,d as o,a as t,b as n,A as r,e as i,h as u,Y as c,c as d,i as p,l as f,n as m,z as y,f as h,p as v,F as g,k as w,t as _,ar as b,j as x}from"./index-DAl_Fwr9.js";import{w as k,u as S,F as $}from"./wd-transition.ohelMZvZ.js";import{c as C,m as I,a as j,_ as V,b as E,x as W,s as T,h as z,o as B,D as P,w as q,p as H}from"./wd-icon.DDgIQcYH.js";import{a as L,u as N}from"./wd-button.CIIRLS01.js";function A(o){const t=e(0),n=()=>{0===t.value&&(document.getElementsByTagName("body")[0].style.overflow="hidden"),t.value++},r=()=>{t.value>0&&(t.value--,0===t.value&&(document.getElementsByTagName("body")[0].style.overflow=""))},i=()=>{o()&&r()};return l(o,e=>{e?n():r()}),a(i),s(i),{lock:n,unlock:r}}const F=V(o({name:"wd-overlay",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...C,show:j(!1),duration:{type:[Object,Number,Boolean],default:300},lockScroll:j(!0),zIndex:I(10)},emits:["click"],setup(e,{emit:l}){const a=e,s=l;function o(){s("click")}function c(){}return A(()=>a.show&&a.lockScroll),(e,l)=>(n(),t(k,{show:e.show,name:"fade","custom-class":"wd-overlay",duration:e.duration,"custom-style":`z-index: ${e.zIndex}; ${e.customStyle}`,onClick:o,onTouchmove:l[0]||(l[0]=r(l=>e.lockScroll?c:"",["stop","prevent"]))},{default:i(()=>[u(e.$slots,"default",{},void 0,!0)]),_:3},8,["show","duration","custom-style"]))}}),[["__scopeId","data-v-ec0037f9"]]),G=V(o({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...C,customInputClass:E(""),customLabelClass:E(""),placeholder:String,placeholderStyle:String,placeholderClass:E(""),cursorSpacing:I(0),cursor:I(-1),selectionStart:I(-1),selectionEnd:I(-1),adjustPosition:j(!0),holdKeyboard:j(!1),confirmType:E("done"),confirmHold:j(!1),focus:j(!1),type:E("text"),maxlength:{type:Number,default:-1},disabled:j(!1),alwaysEmbed:j(!1),alignRight:j(!1),modelValue:T(""),showPassword:j(!1),clearable:j(!1),readonly:j(!1),prefixIcon:String,suffixIcon:String,showWordLimit:j(!1),label:String,labelWidth:E(""),size:String,error:j(!1),center:j(!1),noBorder:j(!1),required:j(!1),prop:String,rules:W(),clearTrigger:E("always"),focusWhenClear:j(!0),ignoreCompositionEvent:j(!0),inputmode:E("text")},emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(a,{emit:s}){const o=a,r=s,k=c(),{translate:C}=L("input"),I=e(!1),j=e(!1),V=e(!1),E=e(!1),W=e(function(){const e=function(e){const{maxlength:l}=o;if(z(l)&&-1!==l&&String(e).length>l)return e.toString().slice(0,l);return e}(o.modelValue);l=e,a=o.modelValue,P(String(l),String(a))||r("update:modelValue",e);var l,a;return e}()),T=S();l(()=>o.focus,e=>{V.value=e},{immediate:!0,deep:!0}),l(()=>o.modelValue,e=>{W.value=z(e)?String(e):""});const{parent:A}=N($),F=d(()=>z(o.placeholder)?o.placeholder:C("placeholder")),G=d(()=>{const{disabled:e,readonly:l,clearable:a,clearTrigger:s}=o;return!(!a||l||e||!W.value||!("always"===s||"focus"===o.clearTrigger&&E.value))}),K=d(()=>{const{disabled:e,readonly:l,maxlength:a,showWordLimit:s}=o;return Boolean(!e&&!l&&z(a)&&a>-1&&s)}),M=d(()=>A&&o.prop&&A.errorMessages&&A.errorMessages[o.prop]?A.errorMessages[o.prop]:""),O=d(()=>{let e=!1;if(A&&A.props.rules){const l=A.props.rules;for(const a in l)Object.prototype.hasOwnProperty.call(l,a)&&a===o.prop&&Array.isArray(l[a])&&(e=l[a].some(e=>e.required))}return o.required||o.rules.some(e=>e.required)||e}),R=d(()=>`wd-input  ${o.label||k.label?"is-cell":""} ${o.center?"is-center":""} ${T.border.value?"is-border":""} ${o.size?"is-"+o.size:""} ${o.error?"is-error":""} ${o.disabled?"is-disabled":""}  ${W.value&&String(W.value).length>0?"is-not-empty":""}  ${o.noBorder?"is-no-border":""} ${o.customClass}`),D=d(()=>`wd-input__label ${o.customLabelClass} ${O.value?"is-required":""}`),U=d(()=>`wd-input__placeholder  ${o.placeholderClass}`),Y=d(()=>o.labelWidth?B({"min-width":o.labelWidth,"max-width":o.labelWidth}):"");function J(){I.value=!I.value}async function Q(){E.value=!1,W.value="",o.focusWhenClear&&(j.value=!0,V.value=!1),await H(),o.focusWhenClear&&(V.value=!0,E.value=!0),r("update:modelValue",W.value),r("clear")}async function X(){await H(150),j.value?j.value=!1:(E.value=!1,r("blur",{value:W.value}))}function Z({detail:e}){E.value=!0,r("focus",e)}function ee({detail:e}){r("update:modelValue",W.value),r("input",e)}function le({detail:e}){r("keyboardheightchange",e)}function ae({detail:e}){r("confirm",e)}function se(){r("clicksuffixicon")}function oe(){r("clickprefixicon")}function te(e){r("click",e)}return(e,l)=>{const a=p,s=b,r=x;return n(),t(a,{class:m(R.value),style:f(e.customStyle),onClick:te},{default:i(()=>[e.label||e.$slots.label?(n(),t(a,{key:0,class:m(D.value),style:f(Y.value)},{default:i(()=>[e.prefixIcon||e.$slots.prefix?(n(),t(a,{key:0,class:"wd-input__prefix"},{default:i(()=>[e.prefixIcon&&!e.$slots.prefix?(n(),t(q,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:oe},null,8,["name"])):u(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})):y("",!0),h(a,{class:"wd-input__label-inner"},{default:i(()=>[e.label&&!e.$slots.label?(n(),v(g,{key:0},[w(_(e.label),1)],64)):u(e.$slots,"label",{key:1},void 0,!0)]),_:3})]),_:3},8,["class","style"])):y("",!0),h(a,{class:"wd-input__body"},{default:i(()=>[h(a,{class:"wd-input__value"},{default:i(()=>[!e.prefixIcon&&!e.$slots.prefix||e.label?y("",!0):(n(),t(a,{key:0,class:"wd-input__prefix"},{default:i(()=>[e.prefixIcon&&!e.$slots.prefix?(n(),t(q,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:oe},null,8,["name"])):u(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})),h(s,{class:m(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",K.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!I.value,modelValue:W.value,"onUpdate:modelValue":l[0]||(l[0]=e=>W.value=e),placeholder:F.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:V.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":U.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:ee,onFocus:Z,onBlur:X,onConfirm:ae,onKeyboardheightchange:le},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),o.readonly?(n(),t(a,{key:1,class:"wd-input__readonly-mask"})):y("",!0),G.value||e.showPassword||e.suffixIcon||K.value||e.$slots.suffix?(n(),t(a,{key:2,class:"wd-input__suffix"},{default:i(()=>[G.value?(n(),t(q,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:Q})):y("",!0),e.showPassword?(n(),t(q,{key:1,"custom-class":"wd-input__icon",name:I.value?"view":"eye-close",onClick:J},null,8,["name"])):y("",!0),K.value?(n(),t(a,{key:2,class:"wd-input__count"},{default:i(()=>[h(r,{class:m([W.value&&String(W.value).length>0?"wd-input__count-current":"",String(W.value).length>e.maxlength?"is-error":""])},{default:i(()=>[w(_(String(W.value).length),1)]),_:1},8,["class"]),w(" /"+_(e.maxlength),1)]),_:1})):y("",!0),e.suffixIcon&&!e.$slots.suffix?(n(),t(q,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:se},null,8,["name"])):u(e.$slots,"suffix",{key:4},void 0,!0)]),_:3})):y("",!0)]),_:3}),M.value?(n(),t(a,{key:0,class:"wd-input__error-message"},{default:i(()=>[w(_(M.value),1)]),_:1})):y("",!0)]),_:3})]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-b402172f"]]);export{G as _,A as u,F as w};
