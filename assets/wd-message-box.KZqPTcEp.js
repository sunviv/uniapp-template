import{B as e,r as t,ad as o,d as s,c as a,H as n,w as l,a as r,b as i,i as u,e as c,f as p,n as d,D as m,k as f,t as w,p as _,h,u as x,F as y,P as b}from"./index-Cdtu3env.js";import{w as C}from"./wd-popup.DSG7syQz.js";import{_ as B}from"./wd-button.ChLp16Zv.js";import{_ as g}from"./wd-input.BLkXn9ef.js";import{c as k,b as V,J as z,K as v,L as P,h as E,x as T,M as I}from"./wd-icon.B0scdPb8.js";import{a as M}from"./useTranslate.BAwKrF92.js";import{_ as O}from"./_plugin-vue_export-helper.BCo6x5W8.js";const $={...k,selector:V("")},j="__MESSAGE_OPTION__",S=Symbol("None"),R={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function N(s=""){const a=s?j+s:j,n=e(a,t(S));n.value===S&&(n.value=R,o(a,n));const l=e=>t=>{const o=z({type:e},"string"==typeof t?{title:t}:t);return"confirm"===o.type||"prompt"===o.type?o.showCancelButton=!0:o.showCancelButton=!1,r(o)},r=e=>new Promise((t,o)=>{const s=z(R,"string"==typeof e?{title:e}:e);n.value=z(s,{show:!0,success:e=>{p(),t(e)},fail:e=>{p(),o(e)}})}),i=l("alert"),u=l("confirm"),c=l("prompt"),p=()=>{n.value!==S&&(n.value.show=!1)};return{show:r,alert:i,confirm:u,prompt:c,close:p}}const D=O(s({name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:$,setup(o){const s=o,{translate:k}=M("message-box"),V=a(()=>`wd-message-box__container ${s.customClass}`),z=a(()=>`wd-message-box__body ${N.title?"":"is-no-title"} ${"prompt"===N.type?"is-prompt":""}`),O=($=s.selector)?`${j}${$}`:j;var $;const S=e(O,t(R)),N=n({msg:"",show:!1,title:"",showCancelButton:!1,closeOnClickModal:!0,confirmButtonText:"",cancelButtonText:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"",inputError:"",showErr:!1,zIndex:99,lazyRender:!0}),D=a(()=>{const e=v({block:!0},E(N.confirmButtonProps)?P(N.confirmButtonProps,I):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e}),G=a(()=>{const e=v({block:!0,type:"info"},E(N.cancelButtonProps)?P(N.cancelButtonProps,I):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e});function H(e){if(("modal"!==e||N.closeOnClickModal)&&("prompt"!==N.type||"confirm"!==e||function(){if(N.inputPattern&&!N.inputPattern.test(String(N.inputValue)))return N.showErr=!0,!1;if("function"==typeof N.inputValidate){if(!N.inputValidate(N.inputValue))return N.showErr=!0,!1}return N.showErr=!1,!0}()))switch(e){case"confirm":N.beforeConfirm?N.beforeConfirm({resolve:t=>{t&&U({action:e,value:N.inputValue})}}):U({action:e,value:N.inputValue});break;case"cancel":A({action:e});break;default:A({action:"modal"})}}function U(e){N.show=!1,T(N.success)&&N.success(e)}function A(e){N.show=!1,T(N.fail)&&N.fail(e)}function F({value:e}){""!==e?N.inputValue=e:N.showErr=!1}return l(()=>S.value,e=>{var t;(t=e)&&(N.title=E(t.title)?t.title:"",N.showCancelButton=!!E(t.showCancelButton)&&t.showCancelButton,N.show=t.show,N.closeOnClickModal=t.closeOnClickModal,N.confirmButtonText=t.confirmButtonText,N.cancelButtonText=t.cancelButtonText,N.msg=t.msg,N.type=t.type,N.inputType=t.inputType,N.inputSize=t.inputSize,N.inputValue=t.inputValue,N.inputPlaceholder=t.inputPlaceholder,N.inputPattern=t.inputPattern,N.inputValidate=t.inputValidate,N.success=t.success,N.fail=t.fail,N.beforeConfirm=t.beforeConfirm,N.inputError=t.inputError,N.showErr=t.showErr,N.zIndex=t.zIndex,N.lazyRender=t.lazyRender,N.confirmButtonProps=t.confirmButtonProps,N.cancelButtonProps=t.cancelButtonProps)},{deep:!0,immediate:!0}),l(()=>N.show,e=>{!1===!!e&&(N.showErr=!1)},{deep:!0,immediate:!0}),(e,t)=>{const o=u;return i(),r(o,null,{default:c(()=>[p(C,{transition:"zoom-in",modelValue:N.show,"onUpdate:modelValue":t[3]||(t[3]=e=>N.show=e),"close-on-click-modal":N.closeOnClickModal,"lazy-render":N.lazyRender,"custom-class":"wd-message-box",onClickModal:t[4]||(t[4]=e=>H("modal")),"z-index":N.zIndex,duration:200},{default:c(()=>[p(o,{class:d(V.value)},{default:c(()=>[p(o,{class:d(z.value)},{default:c(()=>[N.title?(i(),r(o,{key:0,class:"wd-message-box__title"},{default:c(()=>[f(w(N.title),1)]),_:1})):m("",!0),p(o,{class:"wd-message-box__content"},{default:c(()=>["prompt"===N.type?(i(),_(y,{key:0},[p(g,{modelValue:N.inputValue,"onUpdate:modelValue":t[0]||(t[0]=e=>N.inputValue=e),type:N.inputType,size:N.inputSize,placeholder:N.inputPlaceholder,onInput:F},null,8,["modelValue","type","size","placeholder"]),N.showErr?(i(),r(o,{key:0,class:"wd-message-box__input-error"},{default:c(()=>[f(w(N.inputError||x(k)("inputNoValidate")),1)]),_:1})):m("",!0)],64)):m("",!0),h(e.$slots,"default",{},()=>[f(w(N.msg),1)],!0)]),_:3})]),_:3},8,["class"]),p(o,{class:d("wd-message-box__actions "+(N.showCancelButton?"wd-message-box__flex":"wd-message-box__block"))},{default:c(()=>[N.showCancelButton?(i(),r(B,b({key:0},G.value,{onClick:t[1]||(t[1]=e=>H("cancel"))}),{default:c(()=>[f(w(N.cancelButtonText||x(k)("cancel")),1)]),_:1},16)):m("",!0),p(B,b(D.value,{onClick:t[2]||(t[2]=e=>H("confirm"))}),{default:c(()=>[f(w(N.confirmButtonText||x(k)("confirm")),1)]),_:1},16)]),_:1},8,["class"])]),_:3},8,["class"])]),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index"])]),_:3})}}}),[["__scopeId","data-v-05f973d9"]]);export{D as _,N as u};
