import{d as e,g as t,c as a,r as s,w as l,a as o,b as i,e as n,z as d,i as c,l as u,n as r,h as p,k as m,t as h,o as b,N as _,f as v,S as f,u as w,x as y,O as g,m as x,P as $,E as k,G as C,p as I,F as S,J as N,Q as z,R as T,j as L}from"./index-D9FNU4Ji.js";import{b as V,m as P,a as H,r as R,s as j,c as G,h as W,o as E,n as M,i as D,_ as F,e as X,u as B,p as O,g as Z,t as A,w as J,v as Q}from"./wd-icon.Db98EhZ2.js";import{u as q,a as K}from"./wd-button.D-Dwf_Zs.js";import{u as U}from"./useChildren.D6sW72HW.js";import{u as Y}from"./useTouch.BgOAv8ol.js";const ee=Symbol("wd-tabs"),te={...G,modelValue:j(0),slidableNum:P(6),mapNum:P(10),mapTitle:String,sticky:H(!1),offsetTop:P(0),swipeable:H(!1),autoLineWidth:H(!1),lineWidth:R,lineHeight:R,color:V(""),inactiveColor:V(""),animated:H(!1),duration:P(300),slidable:V("auto")},ae=F(e({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...G,name:R,title:String,disabled:H(!1),lazy:H(!0),badgeProps:Object},setup(e){const m=e,{proxy:h}=t(),{parent:b,index:_}=q(ee),v=a(()=>!!W(b)&&b.state.activeIndex===_.value),f=s(v.value),w=a(()=>{const e={};return v.value||W(b)&&b.props.animated||(e.display="none"),E(e)}),y=a(()=>!m.lazy||f.value||v.value);return l(v,e=>{e&&(f.value=!0)}),l(()=>m.name,e=>{(!W(e)||M(e)||D(e))&&b&&function(e){const{name:t}=m;if(null==t||""===t)return;b&&b.children.forEach(t=>{t.$.uid!==e.$.uid&&t.name})}(h)},{deep:!0,immediate:!0}),(e,t)=>{const a=c;return i(),o(a,{class:r(`wd-tab ${e.customClass}`),style:u(e.customStyle)},{default:n(()=>[y.value?(i(),o(a,{key:0,class:r(["wd-tab__body",{"wd-tab__body--inactive":!v.value}]),style:u(w.value)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])):d("",!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-79c06c35"]]),se=F(e({name:"wd-badge",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...G,modelValue:R,showZero:H(!1),bgColor:String,max:Number,isDot:Boolean,hidden:Boolean,type:V(void 0),top:R,right:R},setup(e){const t=e,s=a(()=>{const{modelValue:e,max:a,isDot:s}=t;if(s)return"";let l=e;return l&&a&&M(l)&&!Number.isNaN(l)&&!Number.isNaN(a)&&(l=a<l?`${a}+`:l),l}),l=a(()=>{const e={};return W(t.bgColor)&&(e.backgroundColor=t.bgColor),W(t.top)&&(e.top=X(t.top)),W(t.right)&&(e.right=X(t.right)),E(e)}),b=a(()=>!t.hidden&&(s.value||0===s.value&&t.showZero||t.isDot));return(e,t)=>{const a=c;return i(),o(a,{class:r(["wd-badge",e.customClass]),style:u(e.customStyle)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0),b.value?(i(),o(a,{key:0,class:r(["wd-badge__content","is-fixed",e.type?"wd-badge__content--"+e.type:"",e.isDot?"is-dot":""]),style:u(l.value)},{default:n(()=>[m(h(s.value),1)]),_:1},8,["class","style"])):d("",!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-019b04f1"]]),le=F(e({name:"wd-resize",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...G,customContainerClass:V("")},emits:["resize"],setup(e,{emit:l}){const d=e,m=l,h=s(0),y=s(0),g=s(0),x=s(0),$=s(0),k=s(0),C=s(0),I=a(()=>{const e={width:X(k.value),height:X($.value)};return`${E(e)}${d.customStyle}`});let S=()=>{};const{proxy:N}=t(),z=s(`resize${B()}`);function T({lastWidth:e,lastHeight:t}){h.value=1e5+t,y.value=3*$.value+t,g.value=1e5+e,x.value=3*k.value+e}return b(()=>{_().in(N).select(`#${z.value}`).boundingClientRect().exec(([e])=>{let t=e.height,a=e.width;$.value=t,k.value=a,S=()=>{_().in(N).select(`#${z.value}`).boundingClientRect().exec(([e])=>{if(0===C.value++){const t={};["bottom","top","left","right","height","width"].forEach(a=>{t[a]=e[a]}),m("resize",t)}if(C.value<3)return;const s=e.height,l=e.width;$.value=s,k.value=l;const o=[];if(s!==t&&(t=s,o.push(1)),l!==a&&(a=l,o.push(1)),0!==o.length){const t={};["bottom","top","left","right","height","width"].forEach(a=>{t[a]=e[a]}),m("resize",t)}T({lastWidth:a,lastHeight:t})})},T({lastWidth:a,lastHeight:t})})}),(e,t)=>{const a=c,s=f;return i(),o(a,{class:r(`wd-resize ${e.customClass}`),style:u(I.value)},{default:n(()=>[v(a,{id:z.value,class:r(`wd-resize__container ${e.customContainerClass}`)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0),v(s,{class:"wd-resize__wrapper","scroll-y":!0,"scroll-top":h.value,"scroll-x":!0,"scroll-left":g.value,onScroll:w(S)},{default:n(()=>[v(a,{class:"wd-resize__wrapper--placeholder",style:{height:"100000px",width:"100000px"}})]),_:1},8,["scroll-top","scroll-left","onScroll"]),v(s,{class:"wd-resize__wrapper","scroll-y":!0,"scroll-top":y.value,"scroll-x":!0,"scroll-left":x.value,onScroll:w(S)},{default:n(()=>[v(a,{class:"wd-resize__wrapper--placeholder",style:{height:"250%",width:"250%"}})]),_:1},8,["scroll-top","scroll-left","onScroll"])]),_:3},8,["id","class"])]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-62bdf40e"]]),oe={...G,zIndex:P(1),offsetTop:P(0)},ie=Symbol("wd-sticky-box"),ne=F(e({name:"wd-sticky",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:oe,setup(e,{expose:l}){const d=e,m=s(`wd-sticky${B()}`),h=s([]),b=y({position:"absolute",boxLeaved:!1,top:0,height:0,width:0,state:""}),{parent:_}=q(ie),{proxy:f}=t(),w=a(()=>{const e={"z-index":d.zIndex,height:X(b.height),width:X(b.width)};return b.boxLeaved||(e.position="relative"),`${E(e)}${d.customStyle}`}),x=a(()=>{const e={"z-index":d.zIndex,height:X(b.height),width:X(b.width)};return b.boxLeaved||(e.position="relative"),`${E(e)}`}),$=a(()=>{const e={position:b.position,top:X(b.top)};return E(e)}),k=a(()=>{let e=0;return e=44,44+d.offsetTop});async function C(e){b.width=e.width,b.height=e.height,await O(),function(){if(0===b.height&&0===b.width)return;const e=k.value+b.height;(function(){for(;0!==h.value.length;)h.value.pop().disconnect()})(),function(){const e=g(f,{thresholds:[0,.5]});return h.value.push(e),e}().relativeToViewport({top:-e}).observe(`#${m.value}`,e=>{I(e)}),Z(`#${m.value}`,!1,f).then(t=>{t.bottom=Number(t.bottom)+44,Number(t.bottom)<=e&&I({boundingClientRect:t})})}(),_&&_.observerForChild&&_.observerForChild(f)}function I({boundingClientRect:e}){if(_&&_.boxStyle&&b.height>=_.boxStyle.height)return b.position="absolute",void(b.top=0);let t=e.top<=k.value;t=e.top<k.value,t?(b.state="sticky",b.boxLeaved=!1,b.position="fixed",b.top=k.value):(b.state="normal",b.boxLeaved=!1,b.position="absolute",b.top=0)}return l({setPosition:function(e,t,a){b.boxLeaved=e,b.position=t,b.top=a},stickyState:b,offsetTop:d.offsetTop}),(e,t)=>{const a=c;return i(),o(a,{style:u(`${w.value};display: inline-block;`)},{default:n(()=>[v(a,{class:r(`wd-sticky ${e.customClass}`),style:u(x.value),id:m.value},{default:n(()=>[v(a,{class:"wd-sticky__container",style:u($.value)},{default:n(()=>[v(le,{onResize:C,"custom-style":"display: inline-block;"},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["style"])]),_:3},8,["class","style","id"])]),_:3},8,["style"])}}}),[["__scopeId","data-v-8d1fe2cc"]]),de=F(e({name:"wd-sticky-box",options:{addGlobalClass:!0,styleIsolation:"shared"},props:G,setup(e){const a=e,l=s(`wd-sticky-box${B()}`),d=s(new Map),m=y({height:0,width:0}),{proxy:h}=t(),{children:b,linkChildren:_}=U(ie);function f(e){m.width=e.width,m.height=e.height;const t=d.value;d.value=new Map;for(const[a]of t){w(b.find(e=>e.$.uid===a))}t.forEach(e=>{e.disconnect()}),t.clear()}function w(e){!function(e){const t=d.value.get(e.$.uid);t&&(t.disconnect(),d.value.delete(e.$.uid))}(e);const t=function(e){const t=g(h,{thresholds:[0,.5]});return d.value.set(e.$.uid,t),t}(e),a=e.$.exposed;let s=a.stickyState.height+a.offsetTop;s+=44,m.height<=a.stickyState.height&&a.setPosition(!1,"absolute",0),t.relativeToViewport({top:-s}).observe(`#${l.value}`,e=>{$(a,e)}),Z(`#${l.value}`,!1,h).then(e=>{e.bottom=Number(e.bottom)+44,Number(e.bottom)<=s&&$(a,{boundingClientRect:e})}).catch(e=>{})}function $(e,{boundingClientRect:t}){let a=e.offsetTop;a+=44;const s=e.stickyState.height+a;let l=t.bottom<=s;if(l=t.bottom<s,l)e.setPosition(!0,"absolute",t.height-e.stickyState.height);else if(t.top<=s&&!l){if("normal"===e.stickyState.state)return;e.setPosition(!1,"fixed",a)}}return _({boxStyle:m,observerForChild:w}),x(()=>{d.value=new Map}),(e,t)=>{const s=c;return i(),o(s,{style:{position:"relative"}},{default:n(()=>[v(s,{class:r(`wd-sticky-box ${a.customClass}`),style:u(e.customStyle),id:l.value},{default:n(()=>[v(le,{onResize:f},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["class","style","id"])]),_:3})}}}),[["__scopeId","data-v-19ffe98b"]]),ce=F(e({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:te,emits:["change","disabled","click","update:modelValue"],setup(e,{expose:s,emit:_}){const g=".wd-tabs__nav-item",x=e,V=_,{translate:P}=K("tabs"),H=y({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:R,linkChildren:j}=U(ee);j({state:H,props:x});const{proxy:G}=t(),F=Y(),B=a(()=>"always"===x.slidable||R.length>x.slidableNum),O=a(()=>x.animated?E({left:-100*H.activeIndex+"%","transition-duration":x.duration+"ms","-webkit-transition-duration":x.duration+"ms"}):""),q=(e,t)=>W(e.name)?e.name:t,te=(e=0,t=!1,a=!0)=>{0!==R.length&&(e=me(e),R[e].disabled||(H.activeIndex=e,a&&(oe(!1===t),ie()),function(){if(!H.inited)return;const e=q(R[H.activeIndex],H.activeIndex);e!==x.modelValue&&(V("change",{index:H.activeIndex,name:e}),V("update:modelValue",e))}()))},ae=A(te,100,{leading:!0});function le(){H.mapShow?(H.animating=!1,setTimeout(()=>{H.mapShow=!1},300)):(H.mapShow=!0,setTimeout(()=>{H.animating=!0},100))}async function oe(e=!0){if(!H.inited)return;const{autoLineWidth:t,lineWidth:a,lineHeight:s}=x;try{const l={};if(W(a))l.width=X(a);else if(t){const e=await Z(".wd-tabs__nav-item-text",!0,G),t=Number(e[H.activeIndex].width);l.width=X(t)}W(s)&&(l.height=X(s),l.borderRadius=`calc(${X(s)} / 2)`);const o=await Z(g,!0,G),i=o[H.activeIndex];let n=o.slice(0,H.activeIndex).reduce((e,t)=>e+Number(t.width),0)+Number(i.width)/2;n&&(l.transform=`translateX(${n}px) translateX(-50%)`,e&&(l.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),H.useInnerLine=!1,H.lineStyle=E(l))}catch(l){}}function ie(){H.inited&&Promise.all([Z(g,!0,G),Z(".wd-tabs__nav-container",!1,G)]).then(([e,t])=>{const a=e[H.activeIndex],s=e.slice(0,H.activeIndex).reduce((e,t)=>e+t.width,0)-(t.width-Number(a.width))/2;s===H.scrollLeft?H.scrollLeft=s+Math.random()/1e4:H.scrollLeft=s})}function ce(e){if(void 0===e)return;const{disabled:t}=R[e],a=q(R[e],e);t?V("disabled",{index:e,name:a}):(H.mapShow&&le(),ae(e),V("click",{index:e,name:a}))}function ue(e){x.swipeable&&F.touchStart(e)}function re(e){x.swipeable&&F.touchMove(e)}function pe(){if(!x.swipeable)return;const{direction:e,deltaX:t,offsetX:a}=F;"horizontal"===e.value&&a.value>=50&&(t.value>0&&0!==H.activeIndex?ae(H.activeIndex-1):t.value<0&&H.activeIndex!==R.length-1&&ae(H.activeIndex+1))}function me(e){if(M(e)&&e>=R.length&&(e=0),D(e)){const t=R.findIndex(t=>t.name===e);e=-1===t?0:t}return e}return l(()=>x.modelValue,e=>{!M(e)&&D(e)},{immediate:!0,deep:!0}),l(()=>x.modelValue,e=>{const t=me(e);ae(e,!1,t!==H.activeIndex)},{immediate:!1,deep:!0}),l(()=>R.length,()=>{H.inited&&$(()=>{ae(x.modelValue)})}),l(()=>x.slidableNum,e=>{Q(e,"slidableNum")}),l(()=>x.mapNum,e=>{Q(e,"mapNum")}),b(()=>{H.inited=!0,$(()=>{te(x.modelValue,!0),H.useInnerLine=!0})}),s({setActive:ae,scrollIntoView:ie,updateLineStyle:oe}),(e,t)=>{const a=L,s=k(C("wd-badge"),se),l=c,b=f;return e.sticky?(i(),o(de,{key:0},{default:n(()=>[v(l,{class:r(`wd-tabs ${e.customClass} ${B.value?"is-slide":""} ${e.mapNum<w(R).length&&0!==e.mapNum?"is-map":""}`),style:u(e.customStyle)},{default:n(()=>[v(ne,{"offset-top":e.offsetTop},{default:n(()=>[v(l,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:n(()=>[v(l,{class:"wd-tabs__nav--wrap"},{default:n(()=>[v(b,{"scroll-x":B.value,"scroll-with-animation":"","scroll-left":H.scrollLeft},{default:n(()=>[v(l,{class:"wd-tabs__nav-container"},{default:n(()=>[(i(!0),I(S,null,N(w(R),(t,c)=>(i(),o(l,{onClick:e=>ce(c),key:c,class:r(`wd-tabs__nav-item  ${H.activeIndex===c?"is-active":""} ${t.disabled?"is-disabled":""}`),style:u(H.activeIndex===c?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:n(()=>[t.badgeProps?(i(),o(s,z(T({key:0},t.badgeProps)),{default:n(()=>[v(a,{class:"wd-tabs__nav-item-text"},{default:n(()=>[m(h(t.title),1)]),_:2},1024)]),_:2},1040)):(i(),o(a,{key:1,class:"wd-tabs__nav-item-text"},{default:n(()=>[m(h(t.title),1)]),_:2},1024)),H.activeIndex===c&&H.useInnerLine?(i(),o(l,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):d("",!0)]),_:2},1032,["onClick","class","style"]))),128)),v(l,{class:"wd-tabs__line",style:u(H.lineStyle)},null,8,["style"])]),_:1})]),_:1},8,["scroll-x","scroll-left"])]),_:1}),e.mapNum<w(R).length&&0!==e.mapNum?(i(),o(l,{key:0,class:"wd-tabs__map"},{default:n(()=>[v(l,{class:r("wd-tabs__map-btn  "+(H.animating?"is-open":"")),onClick:le},{default:n(()=>[v(l,{class:r("wd-tabs__map-arrow  "+(H.animating?"is-open":""))},{default:n(()=>[v(J,{name:"arrow-down"})]),_:1},8,["class"])]),_:1},8,["class"]),v(l,{class:"wd-tabs__map-header",style:u(`${H.mapShow?"":"display:none;"}  ${H.animating?"opacity:1;":""}`)},{default:n(()=>[m(h(e.mapTitle||w(P)("all")),1)]),_:1},8,["style"]),v(l,{class:r("wd-tabs__map-body  "+(H.animating?"is-open":"")),style:u(H.mapShow?"":"display:none")},{default:n(()=>[(i(!0),I(S,null,N(w(R),(t,a)=>(i(),o(l,{class:"wd-tabs__map-nav-item",key:a,onClick:e=>ce(a)},{default:n(()=>[v(l,{class:r(`wd-tabs__map-nav-btn ${H.activeIndex===a?"is-active":""}  ${t.disabled?"is-disabled":""}`),style:u(H.activeIndex===a?e.color?"color:"+e.color+";border-color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:n(()=>[m(h(t.title),1)]),_:2},1032,["class","style"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["class","style"])]),_:1})):d("",!0)]),_:1})]),_:1},8,["offset-top"]),v(l,{class:"wd-tabs__container",onTouchstart:ue,onTouchmove:re,onTouchend:pe,onTouchcancel:pe},{default:n(()=>[v(l,{class:r(["wd-tabs__body",e.animated?"is-animated":""]),style:u(O.value)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])]),_:3}),v(l,{class:"wd-tabs__mask",style:u(`${H.mapShow?"":"display:none;"} ${H.animating?"opacity:1;":""}`),onClick:le},null,8,["style"])]),_:3},8,["class","style"])]),_:3})):(i(),o(l,{key:1,class:r(`wd-tabs ${e.customClass} ${B.value?"is-slide":""} ${e.mapNum<w(R).length&&0!==e.mapNum?"is-map":""}`)},{default:n(()=>[v(l,{class:"wd-tabs__nav"},{default:n(()=>[v(l,{class:"wd-tabs__nav--wrap"},{default:n(()=>[v(b,{"scroll-x":B.value,"scroll-with-animation":"","scroll-left":H.scrollLeft},{default:n(()=>[v(l,{class:"wd-tabs__nav-container"},{default:n(()=>[(i(!0),I(S,null,N(w(R),(t,c)=>(i(),o(l,{onClick:e=>ce(c),key:c,class:r(`wd-tabs__nav-item ${H.activeIndex===c?"is-active":""} ${t.disabled?"is-disabled":""}`),style:u(H.activeIndex===c?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:n(()=>[t.badgeProps?(i(),o(s,T({key:0,"custom-class":"wd-tabs__nav-item-badge"},t.badgeProps),{default:n(()=>[v(a,{class:"wd-tabs__nav-item-text"},{default:n(()=>[m(h(t.title),1)]),_:2},1024)]),_:2},1040)):(i(),o(a,{key:1,class:"wd-tabs__nav-item-text"},{default:n(()=>[m(h(t.title),1)]),_:2},1024)),H.activeIndex===c&&H.useInnerLine?(i(),o(l,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):d("",!0)]),_:2},1032,["onClick","class","style"]))),128)),v(l,{class:"wd-tabs__line",style:u(H.lineStyle)},null,8,["style"])]),_:1})]),_:1},8,["scroll-x","scroll-left"])]),_:1}),e.mapNum<w(R).length&&0!==e.mapNum?(i(),o(l,{key:0,class:"wd-tabs__map"},{default:n(()=>[v(l,{class:"wd-tabs__map-btn",onClick:le},{default:n(()=>[v(l,{class:r("wd-tabs__map-arrow "+(H.animating?"is-open":""))},{default:n(()=>[v(J,{name:"arrow-down"})]),_:1},8,["class"])]),_:1}),v(l,{class:"wd-tabs__map-header",style:u(`${H.mapShow?"":"display:none;"}  ${H.animating?"opacity:1;":""}`)},{default:n(()=>[m(h(e.mapTitle||w(P)("all")),1)]),_:1},8,["style"]),v(l,{class:r("wd-tabs__map-body "+(H.animating?"is-open":"")),style:u(H.mapShow?"":"display:none")},{default:n(()=>[(i(!0),I(S,null,N(w(R),(e,t)=>(i(),o(l,{class:"wd-tabs__map-nav-item",key:t,onClick:e=>ce(t)},{default:n(()=>[v(l,{class:r(`wd-tabs__map-nav-btn ${H.activeIndex===t?"is-active":""}  ${e.disabled?"is-disabled":""}`)},{default:n(()=>[m(h(e.title),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["class","style"])]),_:1})):d("",!0)]),_:1}),v(l,{class:"wd-tabs__container",onTouchstart:ue,onTouchmove:re,onTouchend:pe,onTouchcancel:pe},{default:n(()=>[v(l,{class:r(["wd-tabs__body",e.animated?"is-animated":""]),style:u(O.value)},{default:n(()=>[p(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])]),_:3}),v(l,{class:"wd-tabs__mask",style:u(`${H.mapShow?"":"display:none;"}  ${H.animating?"opacity:1":""}`),onClick:le},null,8,["style"])]),_:3},8,["class"]))}}}),[["__scopeId","data-v-c86d9020"]]);export{ae as _,ce as a,ne as b};
