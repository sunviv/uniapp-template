import{v as e,r as t,U as a,d as o,c as s,x as l,w as n,a as r,b as u,i,e as c,f as d,n as p,z as m,k as f,t as _,p as w,h as y,u as x,F as h,T as g,G as b,H as C,K as B,I as k}from"./index-B7HrTH2H.js";import{a as v,_ as z}from"./wd-button.CmaI_1JR.js";import{_ as V,a as P}from"./z-paging.BbqcFT9D.js";import{w as E}from"./wd-popup.BpEmDlab.js";import{_ as T}from"./wd-input.NVAjwAHK.js";import{c as I,b as j,z as M,A as O,B as S,h as $,y as R,C as q}from"./wd-icon.BL4YCdop.js";import{_ as N}from"./_plugin-vue_export-helper.BCo6x5W8.js";const U={...I,selector:j("")},G="__MESSAGE_OPTION__",A=Symbol("None"),H={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",showErr:!1,zIndex:99,lazyRender:!0,inputError:""};const D=N(o({name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:U,setup(a){const o=a,{translate:b}=v("message-box"),C=s(()=>`wd-message-box__container ${o.customClass}`),B=s(()=>`wd-message-box__body ${I.title?"":"is-no-title"} ${"prompt"===I.type?"is-prompt":""}`),k=(V=o.selector)?`${G}${V}`:G;var V;const P=e(k,t(H)),I=l({msg:"",show:!1,title:"",showCancelButton:!1,closeOnClickModal:!0,confirmButtonText:"",cancelButtonText:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"",inputError:"",showErr:!1,zIndex:99,lazyRender:!0}),j=s(()=>{const e=O({block:!0},$(I.confirmButtonProps)?S(I.confirmButtonProps,q):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e}),M=s(()=>{const e=O({block:!0,type:"info"},$(I.cancelButtonProps)?S(I.cancelButtonProps,q):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e});function N(e){if(("modal"!==e||I.closeOnClickModal)&&("prompt"!==I.type||"confirm"!==e||function(){if(I.inputPattern&&!I.inputPattern.test(String(I.inputValue)))return I.showErr=!0,!1;if("function"==typeof I.inputValidate){if(!I.inputValidate(I.inputValue))return I.showErr=!0,!1}return I.showErr=!1,!0}()))switch(e){case"confirm":I.beforeConfirm?I.beforeConfirm({resolve:t=>{t&&U({action:e,value:I.inputValue})}}):U({action:e,value:I.inputValue});break;case"cancel":A({action:e});break;default:A({action:"modal"})}}function U(e){I.show=!1,R(I.success)&&I.success(e)}function A(e){I.show=!1,R(I.fail)&&I.fail(e)}function D({value:e}){""!==e?I.inputValue=e:I.showErr=!1}return n(()=>P.value,e=>{var t;(t=e)&&(I.title=$(t.title)?t.title:"",I.showCancelButton=!!$(t.showCancelButton)&&t.showCancelButton,I.show=t.show,I.closeOnClickModal=t.closeOnClickModal,I.confirmButtonText=t.confirmButtonText,I.cancelButtonText=t.cancelButtonText,I.msg=t.msg,I.type=t.type,I.inputType=t.inputType,I.inputSize=t.inputSize,I.inputValue=t.inputValue,I.inputPlaceholder=t.inputPlaceholder,I.inputPattern=t.inputPattern,I.inputValidate=t.inputValidate,I.success=t.success,I.fail=t.fail,I.beforeConfirm=t.beforeConfirm,I.inputError=t.inputError,I.showErr=t.showErr,I.zIndex=t.zIndex,I.lazyRender=t.lazyRender,I.confirmButtonProps=t.confirmButtonProps,I.cancelButtonProps=t.cancelButtonProps)},{deep:!0,immediate:!0}),n(()=>I.show,e=>{!1===!!e&&(I.showErr=!1)},{deep:!0,immediate:!0}),(e,t)=>{const a=i;return u(),r(a,null,{default:c(()=>[d(E,{transition:"zoom-in",modelValue:I.show,"onUpdate:modelValue":t[3]||(t[3]=e=>I.show=e),"close-on-click-modal":I.closeOnClickModal,"lazy-render":I.lazyRender,"custom-class":"wd-message-box",onClickModal:t[4]||(t[4]=e=>N("modal")),"z-index":I.zIndex,duration:200},{default:c(()=>[d(a,{class:p(C.value)},{default:c(()=>[d(a,{class:p(B.value)},{default:c(()=>[I.title?(u(),r(a,{key:0,class:"wd-message-box__title"},{default:c(()=>[f(_(I.title),1)]),_:1})):m("",!0),d(a,{class:"wd-message-box__content"},{default:c(()=>["prompt"===I.type?(u(),w(h,{key:0},[d(T,{modelValue:I.inputValue,"onUpdate:modelValue":t[0]||(t[0]=e=>I.inputValue=e),type:I.inputType,size:I.inputSize,placeholder:I.inputPlaceholder,onInput:D},null,8,["modelValue","type","size","placeholder"]),I.showErr?(u(),r(a,{key:0,class:"wd-message-box__input-error"},{default:c(()=>[f(_(I.inputError||x(b)("inputNoValidate")),1)]),_:1})):m("",!0)],64)):m("",!0),y(e.$slots,"default",{},()=>[f(_(I.msg),1)],!0)]),_:3})]),_:3},8,["class"]),d(a,{class:p("wd-message-box__actions "+(I.showCancelButton?"wd-message-box__flex":"wd-message-box__block"))},{default:c(()=>[I.showCancelButton?(u(),r(z,g({key:0},M.value,{onClick:t[1]||(t[1]=e=>N("cancel"))}),{default:c(()=>[f(_(I.cancelButtonText||x(b)("cancel")),1)]),_:1},16)):m("",!0),d(z,g(j.value,{onClick:t[2]||(t[2]=e=>N("confirm"))}),{default:c(()=>[f(_(I.confirmButtonText||x(b)("confirm")),1)]),_:1},16)]),_:1},8,["class"])]),_:3},8,["class"])]),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index"])]),_:3})}}}),[["__scopeId","data-v-05f973d9"]]),F=N(o({__name:"data-list",props:{queryParams:{}},setup(o){const s=o,l=function(o=""){const s=o?G+o:G,l=e(s,t(A));l.value===A&&(l.value=H,a(s,l));const n=e=>t=>{const a=M({type:e},"string"==typeof t?{title:t}:t);return"confirm"===a.type||"prompt"===a.type?a.showCancelButton=!0:a.showCancelButton=!1,r(a)},r=e=>new Promise((t,a)=>{const o=M(H,"string"==typeof e?{title:e}:e);l.value=M(o,{show:!0,success:e=>{d(),t(e)},fail:e=>{d(),a(e)}})}),u=n("alert"),i=n("confirm"),c=n("prompt"),d=()=>{l.value!==A&&(l.value.show=!1)};return{show:r,alert:u,confirm:i,prompt:c,close:d}}(),p=t(),m=t([]);async function y(e,t){var a;const{list:o}=await P({page:e,pageSize:t,...s.queryParams});null==(a=p.value)||a.complete(o)}return n(()=>s.queryParams,()=>{var e;null==(e=p.value)||e.reload()},{deep:!0}),(e,t)=>{const a=i,o=b(C("wd-button"),z),s=b(C("z-paging"),V),n=b(C("wd-message-box"),D);return u(),r(a,{class:"h-full p-3"},{default:c(()=>[d(s,{ref_key:"pagingRef",ref:p,modelValue:x(m),"onUpdate:modelValue":t[0]||(t[0]=e=>k(m)?m.value=e:null),fixed:!1,"auto-show-system-loading":"",onQuery:y,class:"auto-show-system-loading"},{default:c(()=>[(u(!0),w(h,null,B(x(m),e=>(u(),r(a,{key:e.id,class:"mb-3 rounded-xl bg-white p-3"},{default:c(()=>[d(a,{class:"flex items-start"},{default:c(()=>[d(a,{class:"tag-green"},{default:c(()=>[f(" 瓶盖 ")]),_:1}),d(a,{class:"break-all text-34 text-font-color-primary font-medium"},{default:c(()=>[f(_(e.productName),1)]),_:2},1024)]),_:2},1024),d(a,{class:"my-2 flex text-30 text-font-color-secondary leading-tight"},{default:c(()=>[d(a,null,{default:c(()=>[f("物料编号：")]),_:1}),d(a,null,{default:c(()=>[f(_("B0014.0052.0201"))]),_:1})]),_:1}),d(a,{class:"my-2 flex text-30 text-font-color-secondary leading-tight"},{default:c(()=>[d(a,null,{default:c(()=>[f("箱码：")]),_:1}),d(a,null,{default:c(()=>[f(_("YT00418082"))]),_:1})]),_:1}),d(a,{class:"mt-2 flex items-center text-30 text-font-color-secondary"},{default:c(()=>[d(a,{class:"mr-3 flex flex-1 items-center justify-between rounded-lg bg-placeholder px-3 py-2"},{default:c(()=>[d(a,{class:"text-30 text-font-color-primary"},{default:c(()=>[f(" 物料数量 ")]),_:1}),d(a,{class:"text-primary"},{default:c(()=>[f(_(1e3)+" 万只 ")]),_:1})]),_:1}),d(o,{type:"error",plain:"",round:!1,onClick:e=>async function(){try{await l.confirm({msg:"确定要删除这条数据吗？",title:"提示"})}catch{}}(),class:"plain"},{default:c(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"]),d(n)]),_:1})}}}),[["__scopeId","data-v-8e37b2d7"]]);export{F as D};
