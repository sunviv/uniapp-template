import{c as e,d as a,r as l,m as t,w as s,a as n,z as r,b as u,i as v,l as o,n as i,e as d,h as c}from"./index-i4nyeiSw.js";import{u as $}from"./useTranslate.DYzV7uBo.js";import{a as w,c as f,d as m,b as y,P as b,q as p,p as C,j as h,_ as g}from"./wd-icon.CjafpvyN.js";const A=Symbol("wd-cell-group"),T={...f,title:String,value:String,useSlot:w(!1),border:w(!1)};function S(){const{parent:a,index:l}=$(A);return{border:e(()=>a&&a.props.border&&l.value)}}const j=Symbol("wd-form"),k={...f,model:m(Object),rules:{type:Object,default:()=>({})},resetOnChange:w(!0),errorType:{type:String,default:"message"}},O=g(a({name:"wd-transition",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...f,show:w(!1),duration:{type:[Object,Number,Boolean],default:300},lazyRender:w(!1),name:[String,Array],destroy:w(!0),enterClass:y(""),enterActiveClass:y(""),enterToClass:y(""),leaveClass:y(""),leaveActiveClass:y(""),leaveToClass:y("")},emits:["click","before-enter","enter","before-leave","leave","after-leave","after-enter"],setup(a,{emit:$}){const w=e=>{let a=`${f.enterClass} ${f.enterActiveClass}`,l=`${f.enterToClass} ${f.enterActiveClass}`,t=`${f.leaveClass} ${f.leaveActiveClass}`,s=`${f.leaveToClass} ${f.leaveActiveClass}`;if(Array.isArray(e))for(let n=0;n<e.length;n++)a=`wd-${e[n]}-enter wd-${e[n]}-enter-active ${a}`,l=`wd-${e[n]}-enter-to wd-${e[n]}-enter-active ${l}`,t=`wd-${e[n]}-leave wd-${e[n]}-leave-active ${t}`,s=`wd-${e[n]}-leave-to wd-${e[n]}-leave-active ${s}`;else e&&(a=`wd-${e}-enter wd-${e}-enter-active ${a}`,l=`wd-${e}-enter-to wd-${e}-enter-active ${l}`,t=`wd-${e}-leave wd-${e}-leave-active ${t}`,s=`wd-${e}-leave-to wd-${e}-leave-active ${s}`);return{enter:a,"enter-to":l,leave:t,"leave-to":s}},f=a,m=$,y=l(!1),g=l(!1),A=l(""),T=l(!1),S=l(300),j=l(""),k=l(null),O=l(null),_=l(null),x=e(()=>`-webkit-transition-duration:${S.value}ms;transition-duration:${S.value}ms;${g.value||!f.destroy?"":"display: none;"}${f.customStyle}`),z=e(()=>`wd-transition ${f.customClass}  ${j.value}`);function I(){m("click")}function R(){k.value=new b(async e=>{try{const a=w(f.name),l=p(f.duration)?f.duration.enter:f.duration;A.value="enter",m("before-enter"),O.value=C(),await O.value,m("enter"),j.value=a.enter,S.value=l,O.value=C(),await O.value,y.value=!0,g.value=!0,O.value=C(),await O.value,O.value=null,T.value=!1,j.value=a["enter-to"],e()}catch(a){}})}function q(){T.value||(T.value=!0,"leave"===A.value?m("after-leave"):"enter"===A.value&&m("after-enter"),!f.show&&g.value&&(g.value=!1))}return t(()=>{f.show&&R()}),s(()=>f.show,e=>{e?(h(k.value)&&k.value.abort(),h(O.value)&&O.value.abort(),h(_.value)&&_.value.abort(),k.value=null,O.value=null,_.value=null,R()):async function(){if(!k.value)return T.value=!1,q();try{if(await k.value,!g.value)return;const e=w(f.name),a=p(f.duration)?f.duration.leave:f.duration;A.value="leave",m("before-leave"),S.value=a,_.value=C(),await _.value,m("leave"),j.value=e.leave,_.value=C(),await _.value,T.value=!1,j.value=e["leave-to"],_.value=function(e){return new b(a=>{const l=setTimeout(()=>{clearTimeout(l),a()},e)})}(S.value),await _.value,_.value=null,q(),k.value=null}catch(e){}}()},{deep:!0}),(e,a)=>{const l=v;return!e.lazyRender||y.value?(u(),n(l,{key:0,class:i(z.value),style:o(x.value),onTransitionend:q,onClick:I},{default:d(()=>[c(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])):r("",!0)}}}),[["__scopeId","data-v-1fc69211"]]);export{A as C,j as F,T as c,k as f,S as u,O as w};
